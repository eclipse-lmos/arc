(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[942],{5364:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>eI});var a=t(95155),n=t(12115),l=t(52619),r=t.n(l),i=t(62044),c=t(20063),o=t(92033),d=t(36204),m=t(21992),u=t(27500),x=t(32265),h=t(74640),p=t(70405),f=t(5225),g=t(66065),j=t(60805),v=t(67917),N=t(73180),b=t(86948),y=t(31120),w=t(3998),C=t(64269),S=t(26333),A=t(55976);let k=A.Kq,T=A.bL,E=A.l9,I=n.forwardRef((e,s)=>{let{className:t,sideOffset:n=4,...l}=e;return(0,a.jsx)(A.UC,{ref:s,sideOffset:n,className:(0,C.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...l})});I.displayName=A.UC.displayName;var D=t(51834),R=t(68086),O=t(15894);let z={rules:{VALID_SECTION:{test:e=>/^\s*##+\s*(?:UseCase:|Description|Solution|Alternative Solution|Steps)/.test(e),className:"text-green-600 dark:text-green-400"},INVALID_SECTION:{test:e=>/^\s*##+/.test(e),className:"text-red-600 dark:text-red-400"},PLACEHOLDER:{regex:/(<.*?>)/,className:"text-blue-600 dark:text-blue-400"},TOOL:{regex:/(@[a-zA-Z0-9\-_]+)/,className:"text-purple-600 dark:text-purple-400 font-medium"},CODE_BLOCK_DELIMITER:{regex:/(```\w*)/,className:"text-cyan-600 dark:text-cyan-400"}},highlight(e,s,t){if(s)return(0,a.jsx)("span",{className:"font-code text-muted-foreground",children:e});if(this.rules.VALID_SECTION.test(e)){if(t)return(0,a.jsx)("strong",{className:this.rules.VALID_SECTION.className,children:e});let s=e.replace(/^\s*##+\s*/,"");return(0,a.jsx)("strong",{className:this.rules.VALID_SECTION.className,children:s})}return this.rules.INVALID_SECTION.test(e)?(0,a.jsx)("span",{className:this.rules.INVALID_SECTION.className,children:e}):e.split(/(<.*?>|@[a-zA-Z0-9\-_]+|```\w*)/g).map((e,s)=>e?this.rules.CODE_BLOCK_DELIMITER.regex.test(e)?(0,a.jsx)("span",{className:this.rules.CODE_BLOCK_DELIMITER.className,children:e},s):this.rules.PLACEHOLDER.regex.test(e)?(0,a.jsx)("span",{className:this.rules.PLACEHOLDER.className,children:e},s):this.rules.TOOL.regex.test(e)?(0,a.jsx)("span",{className:this.rules.TOOL.className,children:e},s):(0,a.jsx)("span",{children:e},s):null)}};function L(e){let{prompt:s,onPromptChange:t,onSave:l,isDirty:r,isSaving:c,onBlur:d,tools:m=[]}=e,u=(0,n.useRef)(null),x=(0,n.useRef)(null),h=(0,n.useRef)(null),p=(0,n.useRef)(null),[A,L]=(0,n.useState)(!1),[_,F]=(0,n.useState)({top:0,left:0}),[U,$]=(0,n.useState)(0),[P,q]=(0,n.useState)([]),[H,M]=(0,n.useState)(null),[J,B]=(0,n.useState)(null),[V,W]=(0,n.useState)(null),[Z,G]=(0,n.useState)(!1),{toast:K}=(0,O.dj)(),[Q,X]=(0,i.n_)(R.EF),Y=(0,n.useCallback)(()=>{let e=x.current;e&&B(e.value.substring(0,e.selectionStart).split("\n").length-1)},[]),ee=(0,n.useCallback)(()=>{let e=p.current;e&&W(e.value.substring(0,e.selectionStart).split("\n").length-1)},[]),es=async()=>{var e;if(!s.trim())return void K({variant:"destructive",title:"Cannot correct spelling",description:"Prompt content cannot be empty."});let a=await X({text:s});a.error?K({variant:"destructive",title:"Error correcting spelling",description:a.error.message}):(null==(e=a.data)?void 0:e.correctSpelling)&&(t(a.data.correctSpelling),K({title:"Prompt corrected",description:"The prompt has been updated with spelling corrections."}))},et=e=>{let a=x.current;if(!a)return;let n=a.selectionStart,l="",r=0;if("section"===H){let t=s.substring(0,n-2),a=s.substring(n);l="".concat(t,"## ").concat(e," ").concat(a),r="".concat(t,"## ").concat(e," ").length}else if("tool"===H){let t=s.substring(0,n).match(/@(\w*)$/);if(t){let a=t.index,i=s.substring(0,a),c=s.substring(n);l="".concat(i,"@").concat(e,"()").concat(c),r="".concat(i,"@").concat(e,"(").length}else l=s,r=n}t(l),L(!1),M(null),setTimeout(()=>{a.focus(),a.setSelectionRange(r,r)},0)},ea=(0,n.useMemo)(()=>{let e=s.split("\n"),t=!1;return e.map((s,l)=>{let r=s.trim().startsWith("```"),i=z.highlight(s,t&&!r,l===J);return r&&(t=!t),(0,a.jsxs)(n.Fragment,{children:[i,l<e.length-1?"\n":""]},l)})},[s,J]),en=(0,n.useMemo)(()=>{let e=s.split("\n"),t=!1;return e.map((s,l)=>{let r=s.trim().startsWith("```"),i=z.highlight(s,t&&!r,l===V);return r&&(t=!t),(0,a.jsxs)(n.Fragment,{children:[i,l<e.length-1?"\n":""]},l)})},[s,V]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(b.Zp,{className:"h-full w-full flex flex-col border-0 bg-transparent shadow-none",children:[(0,a.jsx)(b.aR,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(f.A,{className:"h-5 w-5 text-primary"}),(0,a.jsx)(b.ZB,{className:"text-lg font-semibold",children:"UseCase Prompt"}),(0,a.jsx)(k,{delayDuration:0,children:(0,a.jsxs)(T,{children:[(0,a.jsx)(E,{asChild:!0,children:(0,a.jsxs)(w.$,{variant:"ghost",size:"icon",className:"h-8 w-8 shrink-0",children:[(0,a.jsx)(g.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Prompt Info"})]})}),(0,a.jsx)(I,{side:"right",children:(0,a.jsxs)("div",{className:"grid gap-2 text-sm max-w-xs",children:[(0,a.jsx)("p",{className:"font-semibold",children:"Prompt Structure Guide"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("code",{className:"font-mono bg-muted px-1 rounded",children:"## UseCase"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"The unique identifier for the use case."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("code",{className:"font-mono bg-muted px-1 rounded",children:"## Description"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"The description of the use case, i.e. problem the user is facing."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("code",{className:"font-mono bg-muted px-1 rounded",children:"## Solution"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"How the assistant should behave and respond to the user."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("code",{className:"font-mono bg-muted px-1 rounded",children:"## Alternative Solution"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"An alternative way the assistant can respond."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("code",{className:"font-mono bg-muted px-1 rounded",children:"## Steps"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"A list of steps to perform. Each step should define a turn in the conversation."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("code",{className:"font-mono bg-muted px-1 rounded",children:"@tool-name"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Mention a tool to make it available to the assistant."})]})]})})]})}),(0,a.jsx)(k,{delayDuration:0,children:(0,a.jsxs)(T,{children:[(0,a.jsx)(E,{asChild:!0,children:(0,a.jsxs)(w.$,{variant:"ghost",size:"icon",className:"h-8 w-8 shrink-0",onClick:es,disabled:Q.fetching,children:[Q.fetching?(0,a.jsx)(o.A,{className:"h-4 w-4 animate-spin"}):(0,a.jsx)(j.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Correct Spelling"})]})}),(0,a.jsx)(I,{side:"right",children:(0,a.jsx)("p",{children:"Correct Spelling"})})]})}),(0,a.jsx)(k,{delayDuration:0,children:(0,a.jsxs)(T,{children:[(0,a.jsx)(E,{asChild:!0,children:(0,a.jsxs)(w.$,{variant:"ghost",size:"icon",className:"h-8 w-8 shrink-0",onClick:()=>G(!0),children:[(0,a.jsx)(v.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Full Screen"})]})}),(0,a.jsx)(I,{side:"right",children:(0,a.jsx)("p",{children:"Full Screen"})})]})})]}),(0,a.jsx)(k,{delayDuration:0,children:(0,a.jsxs)(T,{children:[(0,a.jsx)(E,{asChild:!0,children:(0,a.jsxs)(w.$,{onClick:l,disabled:!r||c,variant:"ghost",size:"icon",className:"h-8 w-8 shrink-0",children:[c?(0,a.jsx)(o.A,{className:"h-4 w-4 animate-spin"}):(0,a.jsx)(N.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Save"})]})}),(0,a.jsx)(I,{side:"left",children:(0,a.jsx)("p",{children:"Save"})})]})})]})}),(0,a.jsx)(b.Wu,{className:"p-4 pt-0 flex-1",children:(0,a.jsxs)("div",{className:"relative h-full",children:[(0,a.jsxs)("div",{ref:u,className:"absolute inset-0 z-10 px-3 py-2 font-mono text-sm rounded-lg whitespace-pre-wrap pointer-events-none overflow-auto no-scrollbar","aria-hidden":"true",children:[ea," "]}),(0,a.jsxs)(S.AM,{open:A,onOpenChange:L,children:[(0,a.jsx)(y.T,{ref:x,value:s,onChange:e=>{let s=e.target.value;t(s);let a=e.target.selectionStart,n=s.substring(0,a),l=(e,s)=>{if(e.length>0){q(e),M(s);let t=x.current;if(t){let e=document.createElement("div"),s=window.getComputedStyle(t);e.style.position="absolute",e.style.visibility="hidden",e.style.whiteSpace="pre-wrap",e.style.wordWrap="break-word",e.style.width=s.width,e.style.padding=s.padding,e.style.font=s.font,e.style.lineHeight=s.lineHeight;let n=t.parentElement;if(n){n.appendChild(e),e.textContent=t.value.substring(0,a);let s=document.createElement("span");s.textContent=".",e.appendChild(s);let l=s.offsetTop-t.scrollTop,r=s.offsetLeft-t.scrollLeft;F({top:l+s.offsetHeight+8,left:r}),n.removeChild(e)}}L(!0),$(0)}else L(!1),M(null)};if(n.endsWith("##"))l(["UseCase","Description","Solution","Alternative Solution","Steps"].filter(e=>!s.includes("## ".concat(e))),"section");else if(/@(\w*)$/.test(n)){let e=n.match(/@(\w*)$/);if(e){let s=e[1];l(m.map(e=>e.name).filter(e=>e.toLowerCase().startsWith(s.toLowerCase())),"tool")}}else L(!1),M(null);Y()},onKeyDown:e=>{A&&("ArrowDown"===e.key?(e.preventDefault(),$(e=>(e+1)%P.length)):"ArrowUp"===e.key?(e.preventDefault(),$(e=>(e-1+P.length)%P.length)):"Enter"===e.key||"Tab"===e.key?(e.preventDefault(),P[U]&&et(P[U])):"Escape"===e.key&&(e.preventDefault(),L(!1),M(null))),setTimeout(Y,0)},onScroll:()=>{u.current&&x.current&&(u.current.scrollTop=x.current.scrollTop,u.current.scrollLeft=x.current.scrollLeft),A&&L(!1)},onBlur:()=>{B(null),null==d||d()},onFocus:()=>{Y()},onClick:Y,placeholder:"Enter your prompt here...",className:"relative w-full h-full resize-none font-mono text-sm rounded-lg bg-transparent text-transparent caret-foreground"}),(0,a.jsx)(S.Wv,{asChild:!0,children:(0,a.jsx)("div",{style:{position:"absolute",..._,width:0,height:0}})}),(0,a.jsx)(S.hl,{className:"w-auto p-1",onOpenAutoFocus:e=>e.preventDefault(),sideOffset:5,align:"start",children:(0,a.jsx)("ul",{className:"p-1",children:P.map((e,s)=>(0,a.jsx)("li",{onMouseDown:s=>{s.preventDefault(),et(e)},className:(0,C.cn)("p-2 text-sm rounded-sm cursor-pointer hover:bg-accent",s===U&&"bg-accent"),children:e},"".concat(e,"-").concat(s)))})})]})]})})]}),(0,a.jsx)(D.lG,{open:Z,onOpenChange:G,children:(0,a.jsxs)(D.Cf,{className:"sm:max-w-4xl h-[80vh] flex flex-col p-0",children:[(0,a.jsx)(D.c7,{className:"p-6 pb-4 border-b",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(D.L3,{children:"UseCase Prompt"}),(0,a.jsx)(k,{delayDuration:0,children:(0,a.jsxs)(T,{children:[(0,a.jsx)(E,{asChild:!0,children:(0,a.jsxs)(w.$,{onClick:l,disabled:!r||c,variant:"ghost",size:"icon",children:[c?(0,a.jsx)(o.A,{className:"h-4 w-4 animate-spin"}):(0,a.jsx)(N.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Save Changes"})]})}),(0,a.jsx)(I,{children:(0,a.jsx)("p",{children:"Save Changes"})})]})})]})}),(0,a.jsxs)("div",{className:"relative flex-1 overflow-hidden",children:[(0,a.jsxs)("div",{ref:h,className:"absolute inset-0 z-10 px-6 py-4 font-mono text-sm whitespace-pre-wrap pointer-events-none overflow-auto no-scrollbar","aria-hidden":"true",children:[en," "]}),(0,a.jsx)(y.T,{ref:p,value:s,onChange:e=>{t(e.target.value),ee()},onScroll:()=>{h.current&&p.current&&(h.current.scrollTop=p.current.scrollTop,h.current.scrollLeft=p.current.scrollLeft)},onKeyDown:e=>{setTimeout(ee,0)},onBlur:()=>{W(null)},onFocus:()=>{ee()},onClick:ee,placeholder:"Enter your prompt here...",className:"relative w-full h-full resize-none font-mono text-sm bg-transparent text-transparent caret-foreground p-0 border-0 focus-visible:ring-0 focus-visible:ring-offset-0 px-6 py-4",spellCheck:"false"})]})]})})]})}var _=t(62447),F=t(91480),U=t(5866),$=t(82274),P=t(82111),q=t(13630),H=t(17037),M=t(11647);function J(e){let{testCases:s,isTesting:t,onGenerateTestCases:n,isGeneratingTests:l,onPlayTestCase:r,onRunTests:i,useCaseId:c,onTestCaseSelect:d,onDeleteTestCase:m,onToggleContract:u}=e;return(0,a.jsxs)(b.Zp,{className:"h-full border-0 bg-transparent shadow-none flex flex-col",children:[(0,a.jsxs)(b.aR,{className:"p-4 flex flex-row items-center justify-between gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(_.A,{className:"h-5 w-5 text-primary"}),(0,a.jsx)(b.ZB,{className:"text-lg font-semibold",children:"Test Cases"}),(0,a.jsx)(M.E,{variant:"secondary",children:s.length})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(w.$,{onClick:i,disabled:t||!c,size:"sm",variant:"outline",children:[t?(0,a.jsx)(o.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,a.jsx)(F.A,{className:"mr-2 h-4 w-4"}),"Run Tests"]}),(0,a.jsxs)(w.$,{variant:"outline",size:"icon",className:"h-8 w-8 shrink-0",onClick:n,disabled:l||!c,children:[l?(0,a.jsx)(o.A,{className:"h-4 w-4 animate-spin"}):(0,a.jsx)(U.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Generate TestCases"})]})]})]}),(0,a.jsx)(b.Wu,{className:"p-4 pt-0 flex-1 min-h-0",children:(0,a.jsx)(H.F,{className:"h-full",children:0===s.length?(0,a.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,a.jsx)("p",{className:"text-sm text-muted-foreground text-center px-4",children:"No test cases found. Generate them with AI."})}):(0,a.jsx)("div",{className:"space-y-2",children:s.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between rounded-lg border p-3 hover:bg-accent group",children:[(0,a.jsxs)("div",{className:"w-full text-left h-auto flex flex-row items-center cursor-pointer",onClick:()=>d(e.id),children:[(0,a.jsxs)(w.$,{variant:"ghost",size:"icon",className:"h-8 w-8 shrink-0 mr-2",onClick:s=>{s.stopPropagation(),u(e.id)},children:[(0,a.jsx)($.A,{className:(0,C.cn)("h-4 w-4",e.contract?"text-blue-500":"text-gray-400")}),(0,a.jsx)("span",{className:"sr-only",children:"Toggle contract"})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("p",{className:"font-medium text-sm",children:e.name}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground font-normal",children:e.description})]})]}),(0,a.jsxs)("div",{className:"flex items-center opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,a.jsxs)(w.$,{variant:"ghost",size:"icon",className:"h-8 w-8 shrink-0",onClick:s=>{s.stopPropagation(),r(e)},children:[(0,a.jsx)(P.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Play test case"})]}),(0,a.jsxs)(w.$,{variant:"ghost",size:"icon",className:"h-8 w-8 shrink-0",onClick:s=>m(s,e.id),children:[(0,a.jsx)(q.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Delete test case"})]})]})]},e.id))})})})]})}var B=t(27314),V=t(5418),W=t(66710),Z=t(60406),G=t(28068),K=t(25133),Q=t(50984);function X(e){let{verdict:s}=e;if(!s)return null;let t=s.toLowerCase();return"good"===t||"pass"===t?(0,a.jsxs)("div",{className:"flex items-center gap-2 text-green-600 dark:text-green-500",children:[(0,a.jsx)(Q.A,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"font-semibold",children:s})]}):"partial"===t?(0,a.jsxs)("div",{className:"flex items-center gap-2 text-yellow-600 dark:text-yellow-500",children:[(0,a.jsx)(Z.A,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"font-semibold",children:s})]}):(0,a.jsxs)("div",{className:"flex items-center gap-2 text-red-600 dark:text-red-500",children:[(0,a.jsx)(G.A,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"font-semibold",children:s})]})}var Y=t(13496);function ee(e){let{message:s}=e,t="user"===s.role;return(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full ".concat(t?"bg-secondary text-secondary-foreground":"bg-primary text-primary-foreground"),children:t?(0,a.jsx)(B.A,{className:"h-5 w-5"}):(0,a.jsx)(V.A,{className:"h-5 w-5"})}),(0,a.jsx)("div",{className:"flex-1 space-y-2",children:(0,a.jsx)("div",{className:"rounded-lg border p-3 text-sm bg-card",children:(0,a.jsx)("pre",{className:"whitespace-pre-wrap font-sans",children:s.content})})})]})}function es(e){let{accuracy:s,results:t,verdict:n,reasons:l,missingRequirements:r,violations:i,onViewTestCase:c,isTesting:d}=e,m=null!==s,u=t&&t.length>0,x=null!==n||null!==l&&l.length>0||r&&r.length>0||i&&i.length>0,h=!m&&!u&&!x;return(0,a.jsxs)(b.Zp,{className:"border-0 bg-transparent shadow-none",children:[(0,a.jsxs)(b.aR,{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(W.A,{className:"h-5 w-5 text-primary"}),(0,a.jsx)(b.ZB,{className:"text-lg font-semibold",children:"Performance"})]}),(0,a.jsx)(b.BT,{className:"text-xs",children:"Results from test executions."})]}),(0,a.jsx)(b.Wu,{className:"p-4 pt-0",children:d?(0,a.jsx)("div",{className:"flex h-48 items-center justify-center rounded-lg border",children:(0,a.jsx)(o.A,{className:"h-8 w-8 animate-spin"})}):h?(0,a.jsx)("div",{className:"flex h-48 items-center justify-center rounded-lg border text-center",children:(0,a.jsx)("p",{className:"text-sm text-muted-foreground px-4",children:"Run Tests to see performance results."})}):(0,a.jsxs)("div",{className:"flex flex-col gap-6",children:[m&&(0,a.jsx)("div",{className:"rounded-lg border p-4 flex justify-center items-center",children:(0,a.jsx)(K.A,{value:s||0,label:"Overall Score"})}),u&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"font-semibold px-1 text-sm",children:"Individual Test Results"}),(0,a.jsx)(Y.nD,{type:"single",collapsible:!0,className:"w-full space-y-2",children:t.map((e,s)=>{var t,n,l,r,i;return(0,a.jsx)(Y.As,{value:"item-".concat(s),className:"border-b-0",children:(0,a.jsxs)("div",{className:"rounded-lg border",children:[(0,a.jsx)(Y.$m,{className:"px-4 py-2 text-sm hover:no-underline",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 w-full",children:[(0,a.jsx)(X,{verdict:null==(t=e.details)?void 0:t.verdict}),(0,a.jsx)("span",{className:"flex-1 text-left font-medium",title:e.testCaseName,children:e.testCaseName}),null!==e.score&&void 0!==e.score&&(0,a.jsx)(M.E,{variant:"outline",className:"font-mono",children:e.score.toFixed(0)})]})}),(0,a.jsx)(Y.ub,{className:"px-4 pb-4",children:(0,a.jsxs)("div",{className:"flex flex-col gap-4 mt-2 border-t pt-4",children:[(null==(n=e.details)?void 0:n.reasons)&&e.details.reasons.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold",children:"Reasons"}),(0,a.jsx)("ul",{className:"list-disc list-inside space-y-1 text-sm text-muted-foreground",children:e.details.reasons.map((e,s)=>(0,a.jsx)("li",{children:e},s))})]}),(null==(l=e.details)?void 0:l.evidence)&&e.details.evidence.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold",children:"Evidence"}),(0,a.jsx)("ul",{className:"list-disc list-inside space-y-1 text-sm text-muted-foreground",children:e.details.evidence.map((e,s)=>(0,a.jsxs)("li",{children:[(0,a.jsx)("span",{className:"font-semibold text-foreground",children:"Expected:"})," ",e.mapsTo," ",(0,a.jsx)("br",{}),(0,a.jsx)("span",{className:"font-semibold text-foreground",children:" Actual: "})," ",e.quote]},s))})]}),(null==(r=e.details)?void 0:r.missingRequirements)&&e.details.missingRequirements.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("h4",{className:"font-semibold text-yellow-600 dark:text-yellow-500 flex items-center gap-2",children:[(0,a.jsx)(Z.A,{className:"h-4 w-4"}),"Missing Requirements"]}),(0,a.jsx)("ul",{className:"list-disc list-inside space-y-1 text-sm text-muted-foreground",children:e.details.missingRequirements.map((e,s)=>(0,a.jsx)("li",{children:e},s))})]}),(null==(i=e.details)?void 0:i.violations)&&e.details.violations.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("h4",{className:"font-semibold text-red-600 dark:text-red-500 flex items-center gap-2",children:[(0,a.jsx)(G.A,{className:"h-4 w-4"}),"Violations"]}),(0,a.jsx)("ul",{className:"list-disc list-inside space-y-1 text-sm text-muted-foreground",children:e.details.violations.map((e,s)=>(0,a.jsx)("li",{children:e},s))})]}),e.useCases&&e.useCases.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold",children:"Use Cases Applied"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:e.useCases.map((e,s)=>(0,a.jsx)(M.E,{variant:"secondary",children:e},s))})]}),e.actualConversation&&e.actualConversation.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold",children:"Actual Conversation"}),(0,a.jsx)("div",{className:"mt-2 space-y-4",children:e.actualConversation.map((e,s)=>(0,a.jsx)(ee,{message:e},s))})]}),(0,a.jsx)("div",{className:"flex justify-end pt-4",children:(0,a.jsx)(w.$,{variant:"link",size:"sm",onClick:()=>c(e.testCaseId),children:"View Test Case"})})]})})]})},s)})})]}),!u&&(0,a.jsxs)(a.Fragment,{children:[n&&(0,a.jsx)("div",{className:"rounded-lg border p-2 flex justify-center items-center",children:(0,a.jsx)(X,{verdict:n})}),m&&!u&&(0,a.jsx)("div",{className:"rounded-lg border p-4 flex justify-center items-center",children:(0,a.jsx)(K.A,{value:s,label:"Score"})}),l&&l.length>0&&(0,a.jsx)("div",{className:"space-y-4 rounded-lg border bg-card p-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold",children:"Reasons"}),(0,a.jsx)("ul",{className:"list-disc list-inside space-y-1 text-sm text-muted-foreground",children:l.map((e,s)=>(0,a.jsx)("li",{children:e},s))})]})}),r&&r.length>0&&(0,a.jsx)("div",{className:"space-y-4 rounded-lg border bg-card p-4",children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("h4",{className:"font-semibold text-yellow-600 dark:text-yellow-500 flex items-center gap-2",children:[(0,a.jsx)(Z.A,{className:"h-4 w-4"}),"Missing Requirements"]}),(0,a.jsx)("ul",{className:"list-disc list-inside space-y-1 text-sm text-muted-foreground",children:r.map((e,s)=>(0,a.jsx)("li",{children:e},s))})]})}),i&&i.length>0&&(0,a.jsx)("div",{className:"space-y-4 rounded-lg border bg-card p-4",children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("h4",{className:"font-semibold text-red-600 dark:text-red-500 flex items-center gap-2",children:[(0,a.jsx)(G.A,{className:"h-4 w-4"}),"Violations"]}),(0,a.jsx)("ul",{className:"list-disc list-inside space-y-1 text-sm text-muted-foreground",children:i.map((e,s)=>(0,a.jsx)("li",{children:e},s))})]})})]})]})})]})}var et=t(59338),ea=t(18332);function en(e){let{prompt:s,useCaseId:t,onAcceptSuggestion:l}=e,[r,c]=(0,n.useState)(null),[d,m]=(0,n.useState)(!1),[u,x]=(0,i.n_)(R.Lp),h=async()=>{var e,a;if(c(null),!s||!t){c({improvements:[],error:"A UseCase ID and prompt content are required."}),m(!0);return}let n=await x({useCase:s});n.error?c({improvements:[],error:n.error.message}):(null==(a=n.data)||null==(e=a.improveUseCase)?void 0:e.improvements)?c({improvements:n.data.improveUseCase.improvements}):c({improvements:[]}),m(!0)},p=()=>{m(!1),c(null)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(b.Zp,{className:"border-0 bg-transparent shadow-none",children:[(0,a.jsxs)(b.aR,{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(et.A,{className:"h-5 w-5 text-primary"}),(0,a.jsx)(b.ZB,{className:"text-lg font-semibold",children:"AI Suggestions"})]}),(0,a.jsx)(b.BT,{className:"text-xs",children:"Improve your UseCase prompt based on AI analysis."})]}),(0,a.jsx)(b.Wu,{className:"p-4 pt-0",children:(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)(w.$,{onClick:h,disabled:u.fetching||!t||!s,variant:"outline",size:"sm",children:u.fetching?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Analyzing..."]}):"Get Suggestions"})})})]}),(0,a.jsx)(D.lG,{open:d,onOpenChange:p,children:(0,a.jsxs)(D.Cf,{className:"sm:max-w-2xl",children:[(0,a.jsxs)(D.c7,{children:[(0,a.jsx)(D.L3,{children:"AI Suggestions"}),(0,a.jsx)(D.rr,{children:"Here are some suggestions to improve your UseCase prompt."})]}),(0,a.jsx)(H.F,{className:"max-h-[60vh] pr-6",children:(0,a.jsx)("div",{className:"my-4",children:r&&(0,a.jsx)(a.Fragment,{children:r.error?(0,a.jsxs)(ea.Fc,{variant:"destructive",children:[(0,a.jsx)(ea.XL,{children:"Error"}),(0,a.jsx)(ea.TN,{children:r.error})]}):r.improvements.length>0?(0,a.jsx)(Y.nD,{type:"single",collapsible:!0,className:"w-full",children:r.improvements.map((e,s)=>(0,a.jsxs)(Y.As,{value:"item-".concat(s),children:[(0,a.jsx)(Y.$m,{className:"text-left text-sm hover:no-underline",children:e.issue}),(0,a.jsx)(Y.ub,{children:(0,a.jsxs)("div",{className:"space-y-4 pt-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold",children:"Suggestion"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:e.suggestion})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold",children:"Example Improved Use Case"}),(0,a.jsx)("pre",{className:"mt-2 text-sm text-muted-foreground bg-muted p-2 rounded-md whitespace-pre-wrap font-mono",children:e.improved_use_case})]}),(0,a.jsx)("div",{className:"flex justify-end pt-2",children:(0,a.jsx)(w.$,{size:"sm",onClick:()=>{l(e.improved_use_case),p()},children:"Accept Suggestion"})})]})})]},s))}):(0,a.jsx)("div",{className:"rounded-lg border bg-card p-4 text-center",children:(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"No suggestions available at the moment."})})})})}),(0,a.jsx)(D.Es,{children:(0,a.jsx)(w.$,{onClick:p,children:"Close"})})]})})]})}var el=t(16789),er=t(55253),ei=t(78503),ec=t(65142);function eo(e){let{utterances:s,onRemoveUtterance:t,onAddUtterance:l,onRegenerate:r,isGenerating:i,disabled:c,onPlayUtterance:d}=e,[m,u]=(0,n.useState)(""),h=()=>{m.trim()&&(l(m.trim()),u(""))};return(0,a.jsxs)(b.Zp,{className:"border-0 bg-transparent shadow-none h-full flex flex-col",children:[(0,a.jsxs)(b.aR,{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(er.A,{className:"h-5 w-5 text-primary"}),(0,a.jsx)(b.ZB,{className:"text-lg font-semibold",children:"Example Utterances"}),s&&(0,a.jsx)(M.E,{variant:"secondary",children:s.length})]}),(0,a.jsxs)(w.$,{onClick:r,disabled:i||c,size:"icon",variant:"outline",className:"h-8 w-8",children:[i?(0,a.jsx)(o.A,{className:"h-4 w-4 animate-spin"}):(0,a.jsx)(U.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Regenerate examples"})]})]}),(0,a.jsx)(b.BT,{className:"text-xs",children:"A list of example user inputs."})]}),(0,a.jsxs)(b.Wu,{className:"p-4 pt-0 flex-1 flex flex-col gap-4 min-h-0",children:[(0,a.jsx)(H.F,{className:"rounded-lg border flex-1",children:null===s?(0,a.jsx)("p",{className:"p-4 text-sm text-muted-foreground text-center",children:"Click regenerate to load examples."}):s.length>0?(0,a.jsx)("ul",{className:"space-y-2 p-4",children:s.map((e,s)=>(0,a.jsxs)("li",{className:"group flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-muted-foreground flex-1",children:e}),(0,a.jsxs)("div",{className:"flex items-center opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,a.jsxs)(w.$,{variant:"ghost",size:"icon",className:"h-6 w-6 shrink-0",onClick:()=>d(e),disabled:c,children:[(0,a.jsx)(P.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Play"})]}),(0,a.jsxs)(w.$,{variant:"ghost",size:"icon",className:"h-6 w-6 shrink-0",onClick:()=>t(s),children:[(0,a.jsx)(ei.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Remove"})]})]})]},s))}):(0,a.jsx)("p",{className:"p-4 text-sm text-muted-foreground text-center",children:"No example utterances."})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(ec.p,{placeholder:"Add an utterance...",value:m,onChange:e=>u(e.target.value),onKeyDown:e=>{"Enter"===e.key&&h()},disabled:c}),(0,a.jsxs)(w.$,{onClick:h,variant:"secondary",size:"icon",className:"shrink-0",disabled:!m.trim()||c,children:[(0,a.jsx)(x.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Add"})]})]})]})]})}var ed=t(94979),em=t(76444),eu=t(27063),ex=t(47614);function eh(e){let{isOpen:s,onOpenChange:t,onSaveTest:l}=e,[r,i]=(0,n.useState)(""),[c,o]=(0,n.useState)(""),{toast:d}=(0,O.dj)();return(0,n.useEffect)(()=>{s||(i(""),o(""))},[s]),(0,a.jsx)(D.lG,{open:s,onOpenChange:t,children:(0,a.jsxs)(D.Cf,{children:[(0,a.jsxs)(D.c7,{children:[(0,a.jsx)(D.L3,{children:"Save as Test Case"}),(0,a.jsx)(D.rr,{children:"This will save the current conversation as a new test case."})]}),(0,a.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(em.J,{htmlFor:"name",children:"Name"}),(0,a.jsx)(ec.p,{id:"name",value:r,onChange:e=>i(e.target.value),placeholder:"e.g. Successful password reset"})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(em.J,{htmlFor:"description",children:"Description (optional)"}),(0,a.jsx)(ec.p,{id:"description",value:c,onChange:e=>o(e.target.value),placeholder:"e.g. Test for when user provides correct info"})]})]}),(0,a.jsx)(D.Es,{children:(0,a.jsx)(w.$,{onClick:()=>{if(!r.trim())return void d({variant:"destructive",title:"Name is required",description:"Please provide a name for the test case."});l(r,c)},disabled:!r.trim(),children:"Save"})})]})})}function ep(e){let{messages:s,isThinking:t,isEditing:n,onMessageChange:l,onRemoveMessage:r,onRoleChange:i}=e;return(0,a.jsx)(H.F,{className:"flex-1 pr-4 -mr-4",children:(0,a.jsxs)("div",{className:"space-y-6 pr-4",children:[s.map((e,s)=>(0,a.jsx)(ex.A,{message:e,isEditing:n,onContentChange:e=>l(s,e),onRemove:()=>r(s),onRoleChange:e=>i(s,e)},s)),t&&!n&&(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full bg-primary text-primary-foreground",children:(0,a.jsx)(V.A,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{className:"flex-1 rounded-lg border p-4 text-sm bg-card flex items-center gap-2",children:[(0,a.jsx)(o.A,{className:"h-4 w-4 animate-spin"}),(0,a.jsx)("span",{children:"Thinking..."})]})]})]})})}function ef(e){let{onSubmit:s,isThinking:t,onRegenerate:l,canRegenerate:r}=e,[i,c]=(0,n.useState)("");return(0,a.jsx)("div",{className:"border-t pt-4 mt-4",children:(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),i.trim()&&(s(i),c(""))},className:"flex items-center gap-2",children:[(0,a.jsx)(ec.p,{value:i,onChange:e=>c(e.target.value),placeholder:"Type a message...",disabled:t}),(0,a.jsxs)(w.$,{type:"submit",size:"icon",disabled:t||!i.trim(),children:[(0,a.jsx)(ed.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Send"})]}),(0,a.jsxs)(w.$,{variant:"ghost",size:"icon",onClick:e=>{e.preventDefault(),l()},disabled:!r||t,children:[(0,a.jsx)(U.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Regenerate response"})]})]})})}function eg(e){let{isOpen:s,onOpenChange:t,useCaseId:l,prompt:r,utterance:c,historyItem:o,onSaveHistory:d,onSaveAsTest:m}=e,[u,p]=(0,n.useState)([]),[f,g]=(0,n.useState)(!1),{toast:j}=(0,O.dj)(),[v,b]=(0,n.useState)(!1),[y,C]=(0,n.useState)(!1),S=(0,n.useRef)(""),[A,k]=(0,i.n_)(R.of),T=(0,n.useCallback)(e=>{g(!0),k({input:{useCasesId:l,request:{messages:e.map(e=>{let{role:s,content:t,format:a}=e;return{role:s,content:t,format:a}}),userContext:{profile:[]},systemContext:[],conversationContext:{conversationId:S.current}}}}).then(e=>{let{data:s,error:t}=e;if(g(!1),t)j({variant:"destructive",title:"Error getting assistant response",description:t.message}),p(e=>[...e,{role:"assistant",content:"Sorry, I encountered an error.",format:"text"}]);else if(null==s?void 0:s.assistant){var a,n;let e=(s.assistant.messages||[]).map(e=>{let{__typename:s,...t}=e;return t}),t=null==(a=s.assistant.context)?void 0:a.map(e=>{let{__typename:s,...t}=e;return t}),l=null==(n=s.assistant.toolCalls)?void 0:n.map(e=>{let{__typename:s,...t}=e;return t});if(e.length>0){let s=e[e.length-1];"assistant"===s.role&&(t&&t.length>0&&(s.context=t),l&&l.length>0&&(s.toolCalls=l)),p(s=>[...s,...e])}else if(l&&l.length>0){let e={role:"assistant",content:"",format:"text",toolCalls:l};t&&t.length>0&&(e.context=t),p(s=>[...s,e])}}})},[k,l,j]),E=(0,n.useCallback)(e=>{let s=[...u,{role:"user",content:e,format:"text"}];p(s),T(s)},[u,T]);(0,n.useEffect)(()=>{if(s){if(S.current="conv-".concat(Date.now()),o)p(o.messages),g(!1);else if(c){let e=[{role:"user",content:c,format:"text"}];p(e),T(e)}else p([]),g(!1);C(!1)}},[s,c,o,T]);let I=(0,n.useCallback)(async()=>{if(f)return;let e=u.filter(e=>"user"===e.role);if(0===e.length)return void j({variant:"default",title:"Nothing to regenerate",description:"No user messages to replay."});g(!0);let s=[];p(s);let t="conv-".concat(Date.now());for(let r of e){p([...s=[...s,r]]);let e={messages:s.map(e=>{let{role:s,content:t,format:a}=e;return{role:s,content:t,format:a}}),userContext:{profile:[]},systemContext:[],conversationContext:{conversationId:t}},{data:i,error:c}=await k({input:{useCasesId:l,request:e}});if(c){j({variant:"destructive",title:"Error getting assistant response",description:c.message}),p([...s=[...s,{role:"assistant",content:"Sorry, I encountered an error.",format:"text"}]]);break}if(null==i?void 0:i.assistant){var a,n;let e=(i.assistant.messages||[]).map(e=>{let{__typename:s,...t}=e;return t}),t=null==(a=i.assistant.context)?void 0:a.map(e=>{let{__typename:s,...t}=e;return t}),l=null==(n=i.assistant.toolCalls)?void 0:n.map(e=>{let{__typename:s,...t}=e;return t}),r=[...s];if(e.length>0){let s=e[e.length-1];"assistant"===s.role&&(t&&t.length>0&&(s.context=t),l&&l.length>0&&(s.toolCalls=l)),r.push(...e)}else if(l&&l.length>0){let e={role:"assistant",content:"",format:"text",toolCalls:l};t&&t.length>0&&(e.context=t),r.push(e)}p([...s=r])}}g(!1)},[f,u,l,k,j]);return(0,a.jsx)(eu.cj,{open:s,onOpenChange:e=>{if(!e&&u.length>0&&!o&&!y){let e=u.find(e=>"user"===e.role),s=u.find(e=>"assistant"===e.role);e&&s&&d({utterance:e.content,useCaseId:l,modelResponse:s.content},u,r)}t(e)},children:(0,a.jsxs)(eu.h,{className:"w-full sm:max-w-xl flex flex-col",children:[(0,a.jsxs)(eu.Fm,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(eu.qp,{children:"Chat Playground"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 relative right-4",children:[(0,a.jsxs)(w.$,{variant:"outline",size:"sm",onClick:()=>C(!y),children:[(0,a.jsx)(h.A,{className:"mr-2 h-4 w-4"}),y?"Done":"Edit"]}),(0,a.jsxs)(w.$,{variant:"outline",size:"sm",disabled:0===u.length||y,onClick:()=>b(!0),children:[(0,a.jsx)(N.A,{className:"mr-2 h-4 w-4"}),"Save as Test Case"]})]})]}),(0,a.jsx)(eu.Qs,{children:y?"Add, edit, or remove messages in the conversation.":"Test your UseCase prompt with a sample utterance."})]}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col min-h-0 mt-4",children:[(0,a.jsx)(ep,{messages:u,isThinking:f,isEditing:y,onMessageChange:(e,s)=>{let t=[...u];t[e].content=s,p(t)},onRemoveMessage:e=>{p(s=>s.filter((s,t)=>t!==e))},onRoleChange:(e,s)=>{let t=[...u];t[e].role=s,p(t)}}),y?(0,a.jsx)("div",{className:"border-t pt-4 mt-4 space-y-2",children:(0,a.jsxs)(w.$,{onClick:()=>{p(e=>[...e,{role:"user",content:"",format:"text"}])},className:"w-full",variant:"outline",children:[(0,a.jsx)(x.A,{className:"mr-2 h-4 w-4"})," Add Message"]})}):(0,a.jsx)(ef,{onSubmit:E,isThinking:f,onRegenerate:I,canRegenerate:!f&&u.some(e=>"user"===e.role)})]}),(0,a.jsx)(eh,{isOpen:v,onOpenChange:b,onSaveTest:(e,s)=>{m({name:e,description:s,expectedConversation:u}),b(!1),j({title:"Test Case Saved",description:'"'.concat(e,'" has been added to your test cases.')})}})]})})}var ej=t(87270);function ev(e){let{isOpen:s,onOpenChange:t,history:n,onHistoryItemClick:l}=e;return(0,a.jsx)(eu.cj,{open:s,onOpenChange:t,children:(0,a.jsxs)(eu.h,{className:"w-full sm:max-w-2xl",children:[(0,a.jsxs)(eu.Fm,{children:[(0,a.jsxs)(eu.qp,{className:"flex items-center gap-2",children:[(0,a.jsx)(m.A,{className:"h-5 w-5"}),"Chat History"]}),(0,a.jsx)(eu.Qs,{children:"A log of previous interactions with the assistant. Click a row to view the conversation."})]}),(0,a.jsx)(H.F,{className:"h-[calc(100vh-8rem)] pr-4 mt-4",children:(0,a.jsxs)(ej.XI,{children:[(0,a.jsx)(ej.A0,{children:(0,a.jsxs)(ej.Hj,{children:[(0,a.jsx)(ej.nd,{children:"Utterance"}),(0,a.jsx)(ej.nd,{children:"UseCase ID"}),(0,a.jsx)(ej.nd,{children:"Response"})]})}),(0,a.jsx)(ej.BF,{children:n.map(e=>(0,a.jsxs)(ej.Hj,{onClick:()=>l(e),className:"cursor-pointer",children:[(0,a.jsx)(ej.nA,{className:"max-w-[200px] truncate",children:e.utterance}),(0,a.jsx)(ej.nA,{children:(0,a.jsx)(M.E,{variant:"outline",className:"font-mono",children:e.useCaseId})}),(0,a.jsx)(ej.nA,{className:"max-w-[200px] truncate",children:e.modelResponse})]},e.id))})]})})]})})}var eN=t(23262),eb=t(21255),ey=t(26615);function ew(e){let{tags:s,onTagsChange:t}=e,[l,r]=(0,n.useState)(""),i=()=>{l.trim()&&!s.includes(l.trim())&&(t([...s,l.trim()]),r(""))};return(0,a.jsxs)(S.AM,{children:[(0,a.jsx)(S.Wv,{asChild:!0,children:(0,a.jsxs)(w.$,{variant:"outline",size:"sm",children:[(0,a.jsx)(eb.A,{className:"mr-2 h-4 w-4"}),"Tags (",s.length,")"]})}),(0,a.jsx)(S.hl,{className:"w-80",children:(0,a.jsxs)("div",{className:"grid gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"font-medium leading-none",children:"Tags"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Add or remove tags for this UseCase prompt."})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(ec.p,{value:l,onChange:e=>r(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),i())},placeholder:"Add a tag..."}),(0,a.jsxs)(w.$,{onClick:i,size:"icon",variant:"secondary",className:"shrink-0",children:[(0,a.jsx)(x.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Add tag"})]})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:s.map(e=>(0,a.jsxs)(M.E,{variant:"secondary",className:"flex items-center gap-1",children:[e,(0,a.jsxs)("button",{onClick:()=>{t(s.filter(s=>s!==e))},className:"rounded-full hover:bg-muted-foreground/20",children:[(0,a.jsx)(ey.A,{className:"h-3 w-3"}),(0,a.jsxs)("span",{className:"sr-only",children:["Remove ",e]})]})]},e))})]})})]})}var eC=t(98053),eS=t(27599);let eA=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(eS.bL,{className:(0,C.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...n,ref:s,children:(0,a.jsx)(eS.zi,{className:(0,C.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});eA.displayName=eS.bL.displayName;var ek=t(11186);let eT=e=>{let s=(null==e?void 0:e.replace(/\s+/g,"-").toLowerCase())||"my_id";return{id:s,createdAt:"",tags:[],content:"## UseCase: ".concat(s,"\n\n## Description\n\n## Solution\n\n"),output:null}};function eE(){var e;let s=(0,c.useSearchParams)(),t=(0,c.useRouter)(),l=s.get("id"),f=s.get("new_id"),g=(0,n.useRef)(null),[j,v]=(0,i.IT)({query:eN.PW,variables:{id:l},pause:!l,requestPolicy:"cache-and-network"}),{data:N,fetching:C,error:S}=j,A=(0,n.useMemo)(()=>eT(f),[f]),[k,T]=(0,n.useState)(A.content),[E,I]=(0,n.useState)(A.content),[D,z]=(0,n.useState)(""),[_,F]=(0,n.useState)(""),[U,$]=(0,n.useState)(A.createdAt),[P,q]=(0,n.useState)(A.tags),[M,B]=(0,n.useState)(A.tags),[V,W]=(0,n.useState)([]),[Z,G]=(0,n.useState)(null),[K,Q]=(0,n.useState)(null),[X,Y]=(0,n.useState)(null),[ee,et]=(0,n.useState)(null),[ea,er]=(0,n.useState)(null),[ei,ed]=(0,n.useState)(null),[eh,ep]=(0,n.useState)([]),[ef,ej]=(0,n.useState)([]),[eb,ey]=(0,n.useState)(!1),[eS,eE]=(0,n.useState)(!1),{toast:eI}=(0,O.dj)(),[eD,eR]=(0,n.useState)(!1),[eO,ez]=(0,n.useState)(null),[eL,e_]=(0,n.useState)(!1),[eF,eU]=(0,n.useState)([]),[e$,eP]=(0,n.useState)(null),[eq,eH]=(0,n.useState)(!1),[eM,eJ]=(0,n.useState)(!1),[eB,eV]=(0,n.useState)(null),[eW,eZ]=(0,n.useState)(null),[eG,eK]=(0,n.useState)(!1),[eQ,eX]=(0,n.useState)(!1),[eY,e0]=(0,n.useState)(!1),[e4,e1]=(0,n.useState)(!1),[e2,e5]=(0,n.useState)(null),[e6,e3]=(0,n.useState)(!1),[e8,e9]=(0,n.useState)([]),[e7,se]=(0,n.useState)(null),[ss,st]=(0,i.IT)({query:eN.Cn,variables:{useCaseId:_},pause:!_}),{data:sa,fetching:sn,error:sl}=ss,[sr,si]=(0,i.n_)(R.n$),[sc,so]=(0,i.n_)(R.Q6),[sd,sm]=(0,i.n_)(R.w8),[su,sx]=(0,i.n_)(R.I6),[sh,sp]=(0,i.n_)(R.v3),[sf,sg]=(0,i.n_)(R.Tc),[sj,sv]=(0,i.n_)(R.xu),[sN,sb]=(0,i.n_)(R.t5),[sy,sw]=(0,i.n_)(R.K1),[sC]=(0,i.IT)({query:eN.qS});(0,n.useEffect)(()=>{var e;(null==(e=sC.data)?void 0:e.getMcpTools)&&e9(sC.data.getMcpTools)},[sC.data]);let[sS,sA]=(0,i.IT)({query:eN.s_,requestPolicy:"cache-and-network"}),sk=(0,n.useMemo)(()=>{var e;return(null==(e=sS.data)?void 0:e.widgets)||[]},[sS.data]),sT=k!==E,sE=JSON.stringify(eh)!==JSON.stringify(ef),sI=JSON.stringify(P)!==JSON.stringify(M),sD=sT||sE;(0,n.useEffect)(()=>{if(l){if(null==N?void 0:N.searchById){let e=N.searchById;T(e.content),I(e.content),q(e.tags||[]),B(e.tags||[]),$(e.createdAt),se(e.output||null);let s=e.examples||[];ep(s),ej(s)}else S&&eI({variant:"destructive",title:"Error loading prompt",description:S.message});g.current!==l&&(F(l),G(null),Q(null),Y(null),et(null),er(null),ed(null),W([]),st({requestPolicy:"network-only"}),g.current=l)}else{let e=eT(f);F(e.id),T(e.content),I(e.content),q(e.tags),B(e.tags),$(e.createdAt),se(e.output||null),ep([]),ej([]),G(null),Q(null),Y(null),et(null),er(null),ed(null),W([]),g.current=null}},[l,f,N,S,st,eI,eT]);let sR=(0,n.useCallback)(()=>{if(!eq){if(eH(!0),!k.trim()){eI({variant:"destructive",title:"Cannot save prompt",description:"Prompt content cannot be empty."}),eH(!1);return}if(!_){eI({variant:"destructive",title:"UseCase ID is missing",description:"A UseCase ID could not be determined for this prompt."}),eH(!1);return}so({id:_,createdAt:(U&&!isNaN(Date.parse(U))?new Date(U):new Date).toISOString().split("T")[0],tags:P,content:k,examples:eh||[]}).then(e=>{let{data:s,error:a}=e;a?eI({variant:"destructive",title:"Error storing UseCase Prompt",description:a.message}):(null==s?void 0:s.store)&&(I(k),ej(eh||[]),eI({title:"UseCase Prompt Stored",description:s.store.message}),l||t.push("/prompts?id=".concat(_),{scroll:!1}))}).finally(()=>{eH(!1)})}},[eq,k,U,P,eh,l,_,so,eI,t]),sO=(0,n.useCallback)(()=>{!eM&&_&&(eJ(!0),sm({id:_,tags:P}).then(e=>{let{data:s,error:t}=e;t?eI({variant:"destructive",title:"Error updating tags",description:t.message}):(null==s?void 0:s.updateTags)&&(B(P),eI({title:"Tags Updated",description:s.updateTags.message||"Tags saved successfully."}))}).finally(()=>{eJ(!1)}))},[eM,_,P,sm,eI]);(0,n.useEffect)(()=>{if(!sn){if(sl)eI({variant:"destructive",title:"Error loading test cases",description:"Could not fetch test cases: ".concat(sl.message,".")}),W([]);else if(null==sa?void 0:sa.testCases){let e=sa.testCases.map(e=>{var s;return{...e,contract:null!=(s=e.contract)&&s}});W(s=>JSON.stringify(s)!==JSON.stringify(e)?e:s)}}},[sa,sn,sl,eI]);let sz=(0,n.useCallback)(()=>{sT&&sR()},[sT,sR]);(0,n.useEffect)(()=>{sE&&!eq&&sR()},[eh,sE,eq,sR]),(0,n.useEffect)(()=>{sI&&!eM&&sO()},[P,sI,eM,sO]);let sL=async()=>{if(!e2)return;let e=await sp({id:e2.id});e.error?eI({variant:"destructive",title:"Error deleting test case",description:e.error.message}):(eI({title:"Test case deleted",description:'The test case "'.concat(e2.name,'" has been successfully deleted.')}),st({requestPolicy:"network-only"})),e1(!1),e5(null)},s_=async e=>{let s=(V||[]).find(s=>s.id===e);if(!s)return void eI({variant:"destructive",title:"Test Case not found",description:"Could not find test case with ID: ".concat(e)});let t={...s,contract:!s.contract};W(s=>(s||[]).map(s=>s.id===e?t:s));try{let a=(t.expectedConversation||t.messages||[]).map(e=>{let{role:s,content:t}=e;return{role:s,content:t}}),n=await sg({input:{id:t.id,name:t.name,description:t.description,expectedConversation:a,contract:t.contract}});n.error?(W(t=>(t||[]).map(t=>t.id===e?s:t)),eI({variant:"destructive",title:"Error updating test case contract",description:n.error.message})):(eI({title:"Test Case Updated",description:'Contract status for "'.concat(t.name,'" has been updated.')}),(null==eB?void 0:eB.id)===e&&eV(e=>e?{...e,contract:t.contract}:null),(null==eW?void 0:eW.id)===e&&eZ(e=>e?{...e,contract:t.contract}:null))}catch(t){W(t=>(t||[]).map(t=>t.id===e?s:t)),eI({variant:"destructive",title:"Error updating test case contract",description:t.message||"An unexpected error occurred."})}},sF=async e=>{if(!_)return void eI({variant:"destructive",title:"Cannot save test case",description:"A UseCase ID is required."});let s=(e.expectedConversation||[]).map(e=>{let{role:s,content:t}=e;return{role:s,content:t}}),t=await sb({input:{useCaseId:_,name:e.name,description:e.description,expectedConversation:s,contract:!1}});t.error?eI({variant:"destructive",title:"Error adding test case",description:t.error.message}):(eI({title:"Test Case Added",description:'"'.concat(e.name,'" has been successfully added.')}),st({requestPolicy:"network-only"}))},sU=e=>{let s=(V||[]).find(s=>s.id===e);s?(eV(JSON.parse(JSON.stringify(s))),eZ(JSON.parse(JSON.stringify(s))),eK(!0)):eI({variant:"destructive",title:"Test Case not found",description:"Could not find details for test case with ID: ".concat(e)})},s$=async e=>{if(!eW)return;let s={...eW,contract:e};eZ(s),e0(!0);try{let t=(s.expectedConversation||s.messages||[]).map(e=>{let{role:s,content:t}=e;return{role:s,content:t}}),a=await sg({input:{id:s.id,name:s.name,description:s.description,expectedConversation:t,contract:e}});a.error?(eZ(eW),eI({variant:"destructive",title:"Error updating test case",description:a.error.message})):(W(e=>(e||[]).map(e=>e.id===s.id?s:e)),eV(s),eI({title:"Test Case Updated",description:'Contract status for "'.concat(s.name,'" has been updated.')}))}finally{e0(!1)}},sP=async()=>{if(eW){e0(!0);try{var e;let s=(eW.expectedConversation||eW.messages||[]).map(e=>{let{role:s,content:t}=e;return{role:s,content:t}}),t=await sg({input:{id:eW.id,name:eW.name,description:eW.description,expectedConversation:s,contract:null!=(e=eW.contract)&&e}});t.error?eI({variant:"destructive",title:"Error updating test case",description:t.error.message}):(W(e=>e?e.map(e=>e.id===eW.id?JSON.parse(JSON.stringify(eW)):e):[]),eV(JSON.parse(JSON.stringify(eW))),eX(!1),eI({title:"Test Case Updated",description:'"'.concat(eW.name,'" has been successfully saved.')}))}finally{e0(!1)}}};return l&&C&&!g.current?(0,a.jsxs)("div",{className:"flex min-h-screen w-full flex-col bg-background",children:[(0,a.jsx)(p.default,{}),(0,a.jsxs)("div",{className:"flex flex-1 items-center justify-center",children:[(0,a.jsx)(o.A,{className:"h-8 w-8 animate-spin"}),(0,a.jsx)("p",{className:"ml-4",children:"Loading prompt..."})]})]}):(0,a.jsxs)("div",{className:"flex min-h-screen w-full flex-col bg-background",children:[(0,a.jsx)(p.default,{}),(0,a.jsxs)("main",{className:"flex flex-1 flex-col overflow-hidden px-4 pb-4 md:px-6 md:pb-6",children:[(0,a.jsxs)("div",{className:"flex h-12 shrink-0 items-center justify-between border-b px-2 py-1 mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(r(),{href:"/dashboard",children:(0,a.jsxs)(w.$,{variant:"ghost",size:"icon",children:[(0,a.jsx)(d.A,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"sr-only",children:"Back"})]})}),(0,a.jsx)("span",{id:"prompt-id",className:"p-2 w-72 font-mono text-sm h-9",children:_})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(ew,{tags:P,onTagsChange:q}),(0,a.jsxs)(ek.l6,{value:e7||"none",onValueChange:e=>{let s="none"===e?"":e;_&&sw({id:_,output:s}).then(e=>{let{data:t,error:a}=e;a?eI({variant:"destructive",title:"Error updating widget",description:a.message}):(null==t?void 0:t.updateOutput)&&(eI({title:"Widget Updated",description:"The output widget for this prompt has been changed."}),se(s))})},onOpenChange:e=>{e&&sA({requestPolicy:"network-only"})},disabled:!_||sS.fetching,children:[(0,a.jsx)(ek.bq,{className:"w-[180px]",children:(0,a.jsx)(ek.yv,{placeholder:"Select a widget"})}),(0,a.jsxs)(ek.gC,{children:[(0,a.jsx)(ek.eb,{value:"none",children:"No Widget"}),sk.map(e=>(0,a.jsx)(ek.eb,{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)(w.$,{onClick:()=>e_(!0),size:"sm",variant:"outline",children:[(0,a.jsx)(m.A,{className:"mr-2 h-4 w-4"}),"Chat History"]}),(0,a.jsxs)(w.$,{onClick:()=>{z(k),eP(null),ez(null),eR(!0)},size:"sm",variant:"outline",children:[(0,a.jsx)(u.A,{className:"mr-2 h-4 w-4"}),"Chat"]})]})]}),(0,a.jsxs)(el.HK,{direction:"horizontal",className:"flex-1",children:[(0,a.jsx)(el.wV,{defaultSize:42,className:"relative z-20 pr-4",children:(0,a.jsxs)(el.HK,{direction:"vertical",children:[(0,a.jsx)(el.wV,{defaultSize:70,minSize:30,children:(0,a.jsx)(b.Zp,{className:"h-full",children:(0,a.jsx)(L,{prompt:k,onPromptChange:T,onSave:sR,isDirty:sD,isSaving:eq,onBlur:sz,tools:e8})})}),(0,a.jsx)(el.WM,{withHandle:!0}),(0,a.jsx)(el.wV,{defaultSize:30,minSize:20,className:"pt-4",children:(0,a.jsx)(b.Zp,{className:"h-full",children:(0,a.jsx)(eo,{utterances:eh,onRemoveUtterance:e=>{ep((eh||[]).filter((s,t)=>t!==e))},onAddUtterance:e=>{ep(s=>[...s||[],e])},isGenerating:e6,disabled:!_,onPlayUtterance:e=>{z(k),eP(null),ez(e),eR(!0)},onRegenerate:()=>{if(!k)return void eI({variant:"destructive",title:"Cannot generate utterances",description:"Prompt content is required."});e3(!0),eI({title:"Generating example utterances...",description:"AI is creating new examples for you."}),sv({useCase:k}).then(e=>{var s;let{data:t,error:a}=e;if(e3(!1),a)eI({variant:"destructive",title:"Error generating utterances",description:a.message});else if(null==t||null==(s=t.examples)?void 0:s.examples){let e=t.examples.examples;ep(e),eI({title:"Utterances Generated",description:"".concat(e.length," new example utterances were created.")})}})}})})})]})}),(0,a.jsx)(el.WM,{withHandle:!0}),(0,a.jsx)(el.wV,{defaultSize:33,children:(0,a.jsx)(b.Zp,{className:"h-full mx-4",children:(0,a.jsx)(J,{testCases:V||[],isTesting:eb,onGenerateTestCases:()=>{if(!_)return void eI({variant:"destructive",title:"Cannot generate tests",description:"A UseCase ID is required."});eE(!0),eI({title:"Generating test cases...",description:"AI is creating new test cases for your prompt."}),si({id:_}).then(e=>{let{data:s,error:t}=e;eE(!1),t?eI({variant:"destructive",title:"Error generating test cases",description:t.message}):(null==s?void 0:s.newTests)&&(eI({title:"Test Cases Generated",description:"".concat(s.newTests.count," new test cases were created.")}),st({requestPolicy:"network-only"}))})},isGeneratingTests:eS,onPlayTestCase:e=>{if(!_)return void eI({variant:"destructive",title:"Cannot run test",description:"A UseCase ID is required."});ey(!0),eI({title:"Running test: ".concat(e.name),description:"The prompt is being evaluated against the selected test case."}),sx({id:_,testCaseId:e.id}).then(s=>{let{data:t,error:a}=s;if(ey(!1),a)eI({variant:"destructive",title:"Error running test",description:a.message});else if(null==t?void 0:t.executeTests){var n,l;let{overallScore:s,results:a}=t.executeTests;G(null!=s?s:null),ed(null!=a?a:[]),Q(null),Y(null),et(null),er(null),eI({title:"Test complete!",description:'Score for "'.concat(e.name,'": ').concat((null!=(l=null==a||null==(n=a[0])?void 0:n.score)?l:0).toFixed(0))})}})},onRunTests:()=>{if(!_)return void eI({variant:"destructive",title:"Cannot run tests",description:"A UseCase ID is required."});ey(!0),eI({title:"Running tests...",description:"The prompt is being evaluated against the test cases."}),sx({id:_}).then(e=>{let{data:s,error:t}=e;if(ey(!1),t)eI({variant:"destructive",title:"Error running tests",description:t.message});else if(null==s?void 0:s.executeTests){let{overallScore:e,results:t}=s.executeTests;G(null!=e?e:null),ed(null!=t?t:[]),Q(null),Y(null),et(null),er(null),eI({title:"Tests complete!",description:"Overall score: ".concat((null!=e?e:0).toFixed(2))})}})},useCaseId:_,onTestCaseSelect:sU,onDeleteTestCase:(e,s)=>{e.stopPropagation();let t=(V||[]).find(e=>e.id===s);t&&(e5({id:t.id,name:t.name}),e1(!0))},onToggleContract:s_})})}),(0,a.jsx)(el.WM,{withHandle:!0}),(0,a.jsx)(el.wV,{defaultSize:25,className:"pl-4",children:(0,a.jsxs)("div",{className:"h-full flex flex-col gap-4",children:[(0,a.jsx)(b.Zp,{children:(0,a.jsx)(en,{prompt:k,useCaseId:_,onAcceptSuggestion:e=>{T(e),eI({title:"Prompt Updated",description:"The AI suggestion has been applied."})}})}),(0,a.jsx)(b.Zp,{className:"flex-1",children:(0,a.jsx)(es,{accuracy:Z,verdict:K,reasons:X,missingRequirements:ee,violations:ea,results:ei,onViewTestCase:sU,isTesting:eb})})]})})]})]}),(0,a.jsx)(eg,{isOpen:eD,onOpenChange:e=>{e||(ez(null),eP(null)),eR(e)},useCaseId:e$?e$.useCaseId:_,prompt:e$?e$.prompt:D,utterance:eO,historyItem:e$,onSaveHistory:(e,s,t)=>{let a={...e,id:"chat-".concat(Date.now()),timestamp:new Date().toISOString(),messages:s,prompt:t};eU(e=>[a,...e])},onSaveAsTest:sF}),(0,a.jsx)(ev,{isOpen:eL,onOpenChange:e_,history:eF,onHistoryItemClick:e=>{ez(null),eP(e),e_(!1),setTimeout(()=>{eR(!0)},500)}}),(0,a.jsx)(eu.cj,{open:eG,onOpenChange:e=>{eK(e),e||(eV(null),eZ(null),eX(!1))},children:(0,a.jsx)(eu.h,{className:"w-full sm:max-w-xl flex flex-col",children:eW&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eu.Fm,{children:(0,a.jsx)("div",{className:"space-y-1.5",children:eQ?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ec.p,{value:eW.name,onChange:e=>eZ(s=>s?{...s,name:e.target.value}:null),className:"text-lg font-semibold h-auto p-0 border-0 shadow-none focus-visible:ring-0",placeholder:"Test Case Name"}),(0,a.jsx)(y.T,{value:eW.description,onChange:e=>eZ(s=>s?{...s,description:e.target.value}:null),className:"text-sm text-muted-foreground p-0 border-0 shadow-none focus-visible:ring-0 resize-none",placeholder:"Test Case Description",rows:2})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eu.qp,{children:eW.name}),(0,a.jsx)(eu.Qs,{children:eW.description})]})})}),(0,a.jsxs)("div",{className:"border-y py-4 my-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-1",children:[(0,a.jsx)(em.J,{htmlFor:"contract-switch",className:"font-semibold",children:"Contract Test"}),(0,a.jsx)(eA,{id:"contract-switch",checked:null!=(e=eW.contract)&&e,onCheckedChange:s$,disabled:eY})]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground px-1 pt-1",children:"If enabled, the Test will be used at runtime to improve reliability."})]}),(0,a.jsx)(H.F,{className:"flex-1 pr-4 -mr-4",children:(0,a.jsx)("div",{className:"space-y-6 pr-4",children:(eW.messages||eW.expectedConversation)&&(eW.messages||eW.expectedConversation).length>0?(eW.messages||eW.expectedConversation).map((e,s)=>(0,a.jsx)(ex.A,{message:e,isEditing:eQ,onContentChange:e=>{eZ(t=>{if(!t)return null;let a=t.expectedConversation||t.messages||[];if(!a)return t;let n=[...a];return n[s]={...n[s],content:e},{...t,expectedConversation:n}})},onRoleChange:e=>{eZ(t=>{if(!t)return null;let a=t.expectedConversation||t.messages||[];if(!a)return t;let n=[...a];return n[s]={...n[s],role:e},{...t,expectedConversation:n}})},onRemove:()=>{eZ(e=>{if(!e)return null;let t=e.expectedConversation||e.messages||[];if(!t)return e;let a=t.filter((e,t)=>t!==s);return{...e,expectedConversation:a}})}},s)):(0,a.jsxs)("div",{className:"text-sm text-muted-foreground text-center pt-8",children:["No conversation details available for this test case.",eQ&&" Add a message to get started."]})})}),(0,a.jsxs)("div",{className:"border-t pt-4 mt-auto space-y-4",children:[eQ&&(0,a.jsxs)(w.$,{onClick:()=>{eZ(e=>{if(!e)return null;let s=[...e.expectedConversation||e.messages||[],{role:"user",content:"",format:"text"}];return{...e,expectedConversation:s}})},className:"w-full",variant:"outline",children:[(0,a.jsx)(x.A,{className:"mr-2 h-4 w-4"})," Add Message"]}),(0,a.jsx)("div",{className:"flex justify-end gap-2",children:eQ?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(w.$,{variant:"outline",onClick:()=>{eB&&eZ(JSON.parse(JSON.stringify(eB))),eX(!1)},children:"Cancel"}),(0,a.jsxs)(w.$,{onClick:sP,disabled:eY,children:[eY&&(0,a.jsx)(o.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Save"]})]}):(0,a.jsxs)(w.$,{variant:"outline",onClick:()=>eX(!0),children:[(0,a.jsx)(h.A,{className:"mr-2 h-4 w-4"}),"Edit"]})})]})]})})}),(0,a.jsx)(eC.Lt,{open:e4,onOpenChange:e=>{e||e5(null),e1(e)},children:(0,a.jsxs)(eC.EO,{children:[(0,a.jsxs)(eC.wd,{children:[(0,a.jsx)(eC.r7,{children:"Are you sure?"}),(0,a.jsxs)(eC.$v,{children:['This action cannot be undone. This will permanently delete the test case "',null==e2?void 0:e2.name,'".']})]}),(0,a.jsxs)(eC.ck,{children:[(0,a.jsx)(eC.Zr,{children:"Cancel"}),(0,a.jsx)(eC.Rx,{onClick:sL,children:"Delete"})]})]})})]})}function eI(){return(0,a.jsx)(n.Suspense,{fallback:(0,a.jsxs)("div",{className:"flex min-h-screen w-full flex-col items-center justify-center bg-background",children:[(0,a.jsx)(o.A,{className:"h-8 w-8 animate-spin text-primary"}),(0,a.jsx)("p",{className:"mt-4 text-muted-foreground",children:"Loading..."})]}),children:(0,a.jsx)(eE,{})})}},25133:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});var a=t(95155),n=t(53773);t(31189);var l=t(5379);function r(e){let{value:s,label:t}=e,{resolvedTheme:r}=(0,l.D)();return(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("div",{style:{width:"100px",height:"100px"},children:(0,a.jsx)(n.QF,{value:s,text:"".concat(s.toFixed(0)),strokeWidth:10,styles:(0,n.Hf)({pathColor:"hsl(var(--chart-2))",textColor:"dark"===r?"hsl(210 40% 98%)":"hsl(221.2 83.2% 53.3%)",trailColor:"hsl(var(--muted))",pathTransitionDuration:.5})})}),(0,a.jsx)("p",{className:"text-sm font-medium text-muted-foreground mt-2",children:t})]})}},27063:(e,s,t)=>{"use strict";t.d(s,{Fm:()=>h,Qs:()=>g,XW:()=>p,cj:()=>o,h:()=>x,qp:()=>f});var a=t(95155),n=t(12115),l=t(77283),r=t(83101),i=t(26615),c=t(64269);let o=l.bL;l.l9,l.bm;let d=l.ZL,m=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(l.hJ,{className:(0,c.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...n,ref:s})});m.displayName=l.hJ.displayName;let u=(0,r.F)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),x=n.forwardRef((e,s)=>{let{side:t="right",className:n,children:r,...o}=e;return(0,a.jsxs)(d,{children:[(0,a.jsx)(m,{}),(0,a.jsxs)(l.UC,{ref:s,className:(0,c.cn)(u({side:t}),n),...o,children:[r,(0,a.jsxs)(l.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,a.jsx)(i.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});x.displayName=l.UC.displayName;let h=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,c.cn)("flex flex-col space-y-2 text-center sm:text-left",s),...t})};h.displayName="SheetHeader";let p=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,c.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t})};p.displayName="SheetFooter";let f=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(l.hE,{ref:s,className:(0,c.cn)("text-lg font-semibold text-foreground",t),...n})});f.displayName=l.hE.displayName;let g=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(l.VY,{ref:s,className:(0,c.cn)("text-sm text-muted-foreground",t),...n})});g.displayName=l.VY.displayName},33556:(e,s,t)=>{Promise.resolve().then(t.bind(t,5364))},87270:(e,s,t)=>{"use strict";t.d(s,{A0:()=>i,BF:()=>c,Hj:()=>o,XI:()=>r,nA:()=>m,nd:()=>d});var a=t(95155),n=t(12115),l=t(64269);let r=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:s,className:(0,l.cn)("w-full caption-bottom text-sm",t),...n})})});r.displayName="Table";let i=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("thead",{ref:s,className:(0,l.cn)("[&_tr]:border-b",t),...n})});i.displayName="TableHeader";let c=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("tbody",{ref:s,className:(0,l.cn)("[&_tr:last-child]:border-0",t),...n})});c.displayName="TableBody",n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("tfoot",{ref:s,className:(0,l.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...n})}).displayName="TableFooter";let o=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("tr",{ref:s,className:(0,l.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...n})});o.displayName="TableRow";let d=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("th",{ref:s,className:(0,l.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...n})});d.displayName="TableHead";let m=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("td",{ref:s,className:(0,l.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...n})});m.displayName="TableCell",n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("caption",{ref:s,className:(0,l.cn)("mt-4 text-sm text-muted-foreground",t),...n})}).displayName="TableCaption"}},e=>{e.O(0,[310,992,644,73,381,44,886,448,401,34,497,45,405,513,966,441,255,358],()=>e(e.s=33556)),_N_E=e.O()}]);