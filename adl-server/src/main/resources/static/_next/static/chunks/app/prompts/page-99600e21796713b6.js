(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[942],{560:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>eU});var a=t(5155),n=t(2115),l=t(2619),r=t.n(l),i=t(2044),c=t(63),o=t(2033),d=t(6204),m=t(1992),u=t(7500),x=t(2265),h=t(4640),p=t(878),f=t(5225),g=t(6065),j=t(805),v=t(3180),N=t(6948),y=t(1120),w=t(3998),b=t(4269),C=t(6333),S=t(5976);let k=S.Kq,A=S.bL,T=S.l9,E=n.forwardRef((e,s)=>{let{className:t,sideOffset:n=4,...l}=e;return(0,a.jsx)(S.UC,{ref:s,sideOffset:n,className:(0,b.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...l})});E.displayName=S.UC.displayName;var R=t(8086),D=t(5894);let I={rules:{VALID_SECTION:{test:e=>/^\s*##+\s*(?:UseCase:|Description|Solution|Alternative Solution|Steps)/.test(e),className:"text-green-600 dark:text-green-400"},INVALID_SECTION:{test:e=>/^\s*##+/.test(e),className:"text-red-600 dark:text-red-400"},PLACEHOLDER:{regex:/(<.*?>)/,className:"text-blue-600 dark:text-blue-400"},TOOL:{regex:/(@[a-zA-Z0-9\-_]+)/,className:"text-purple-600 dark:text-purple-400 font-medium"},CODE_BLOCK_DELIMITER:{regex:/(```\w*)/,className:"text-cyan-600 dark:text-cyan-400"}},highlight(e,s,t){if(s)return(0,a.jsx)("span",{className:"font-code text-muted-foreground",children:e});if(this.rules.VALID_SECTION.test(e)){if(t)return(0,a.jsx)("strong",{className:this.rules.VALID_SECTION.className,children:e});let s=e.replace(/^\s*##+\s*/,"");return(0,a.jsx)("strong",{className:this.rules.VALID_SECTION.className,children:s})}return this.rules.INVALID_SECTION.test(e)?(0,a.jsx)("span",{className:this.rules.INVALID_SECTION.className,children:e}):e.split(/(<.*?>|@[a-zA-Z0-9\-_]+|```\w*)/g).map((e,s)=>e?this.rules.CODE_BLOCK_DELIMITER.regex.test(e)?(0,a.jsx)("span",{className:this.rules.CODE_BLOCK_DELIMITER.className,children:e},s):this.rules.PLACEHOLDER.regex.test(e)?(0,a.jsx)("span",{className:this.rules.PLACEHOLDER.className,children:e},s):this.rules.TOOL.regex.test(e)?(0,a.jsx)("span",{className:this.rules.TOOL.className,children:e},s):(0,a.jsx)("span",{children:e},s):null)}};function O(e){let{prompt:s,onPromptChange:t,onSave:l,isDirty:r,isSaving:c,onBlur:d,tools:m=[]}=e,u=(0,n.useRef)(null),x=(0,n.useRef)(null),[h,p]=(0,n.useState)(!1),[S,O]=(0,n.useState)({top:0,left:0}),[z,L]=(0,n.useState)(0),[U,_]=(0,n.useState)([]),[$,P]=(0,n.useState)(null),[F,q]=(0,n.useState)(null),{toast:Z}=(0,D.dj)(),[H,J]=(0,i.n_)(R.EF),V=(0,n.useCallback)(()=>{let e=x.current;e&&q(e.value.substring(0,e.selectionStart).split("\n").length-1)},[]),M=async()=>{var e;if(!s.trim())return void Z({variant:"destructive",title:"Cannot correct spelling",description:"Prompt content cannot be empty."});let a=await J({text:s});a.error?Z({variant:"destructive",title:"Error correcting spelling",description:a.error.message}):(null==(e=a.data)?void 0:e.correctSpelling)&&(t(a.data.correctSpelling),Z({title:"Prompt corrected",description:"The prompt has been updated with spelling corrections."}))},W=e=>{let a=x.current;if(!a)return;let n=a.selectionStart,l="",r=0;if("section"===$){let t=s.substring(0,n-2),a=s.substring(n);l="".concat(t,"## ").concat(e," ").concat(a),r="".concat(t,"## ").concat(e," ").length}else if("tool"===$){let t=s.substring(0,n).match(/@(\w*)$/);if(t){let a=t.index,i=s.substring(0,a),c=s.substring(n);l="".concat(i,"@").concat(e,"()").concat(c),r="".concat(i,"@").concat(e,"(").length}else l=s,r=n}t(l),p(!1),P(null),setTimeout(()=>{a.focus(),a.setSelectionRange(r,r)},0)},B=(0,n.useMemo)(()=>{let e=s.split("\n"),t=!1;return e.map((s,l)=>{let r=s.trim().startsWith("```"),i=I.highlight(s,t&&!r,l===F);return r&&(t=!t),(0,a.jsxs)(n.Fragment,{children:[i,l<e.length-1?"\n":""]},l)})},[s,F]);return(0,a.jsxs)(N.Zp,{className:"h-full w-full flex flex-col border-0 bg-transparent shadow-none",children:[(0,a.jsx)(N.aR,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(f.A,{className:"h-5 w-5 text-primary"}),(0,a.jsx)(N.ZB,{className:"text-lg font-semibold",children:"UseCase Prompt"}),(0,a.jsx)(k,{delayDuration:0,children:(0,a.jsxs)(A,{children:[(0,a.jsx)(T,{asChild:!0,children:(0,a.jsxs)(w.$,{variant:"ghost",size:"icon",className:"h-8 w-8 shrink-0",children:[(0,a.jsx)(g.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Prompt Info"})]})}),(0,a.jsx)(E,{side:"right",children:(0,a.jsxs)("div",{className:"grid gap-2 text-sm max-w-xs",children:[(0,a.jsx)("p",{className:"font-semibold",children:"Prompt Structure Guide"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("code",{className:"font-mono bg-muted px-1 rounded",children:"## UseCase"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"The unique identifier for the use case."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("code",{className:"font-mono bg-muted px-1 rounded",children:"## Description"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"The description of the use case, i.e. problem the user is facing."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("code",{className:"font-mono bg-muted px-1 rounded",children:"## Solution"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"How the assistant should behave and respond to the user."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("code",{className:"font-mono bg-muted px-1 rounded",children:"## Alternative Solution"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"An alternative way the assistant can respond."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("code",{className:"font-mono bg-muted px-1 rounded",children:"## Steps"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"A list of steps to perform. Each step should define a turn in the conversation."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("code",{className:"font-mono bg-muted px-1 rounded",children:"@tool-name"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Mention a tool to make it available to the assistant."})]})]})})]})}),(0,a.jsx)(k,{delayDuration:0,children:(0,a.jsxs)(A,{children:[(0,a.jsx)(T,{asChild:!0,children:(0,a.jsxs)(w.$,{variant:"ghost",size:"icon",className:"h-8 w-8 shrink-0",onClick:M,disabled:H.fetching,children:[H.fetching?(0,a.jsx)(o.A,{className:"h-4 w-4 animate-spin"}):(0,a.jsx)(j.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Correct Spelling"})]})}),(0,a.jsx)(E,{side:"right",children:(0,a.jsx)("p",{children:"Correct Spelling"})})]})})]}),(0,a.jsx)(k,{delayDuration:0,children:(0,a.jsxs)(A,{children:[(0,a.jsx)(T,{asChild:!0,children:(0,a.jsxs)(w.$,{onClick:l,disabled:!r||c,variant:"ghost",size:"icon",className:"h-8 w-8 shrink-0",children:[c?(0,a.jsx)(o.A,{className:"h-4 w-4 animate-spin"}):(0,a.jsx)(v.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Save"})]})}),(0,a.jsx)(E,{side:"left",children:(0,a.jsx)("p",{children:"Save"})})]})})]})}),(0,a.jsx)(N.Wu,{className:"p-4 pt-0 flex-1",children:(0,a.jsxs)("div",{className:"relative h-full",children:[(0,a.jsxs)("div",{ref:u,className:"absolute inset-0 z-10 px-3 py-2 font-mono text-sm rounded-lg whitespace-pre-wrap pointer-events-none overflow-auto no-scrollbar","aria-hidden":"true",children:[B," "]}),(0,a.jsxs)(C.AM,{open:h,onOpenChange:p,children:[(0,a.jsx)(y.T,{ref:x,value:s,onChange:e=>{let s=e.target.value;t(s);let a=e.target.selectionStart,n=s.substring(0,a),l=(e,s)=>{if(e.length>0){_(e),P(s);let t=x.current;if(t){let e=document.createElement("div"),s=window.getComputedStyle(t);e.style.position="absolute",e.style.visibility="hidden",e.style.whiteSpace="pre-wrap",e.style.wordWrap="break-word",e.style.width=s.width,e.style.padding=s.padding,e.style.font=s.font,e.style.lineHeight=s.lineHeight;let n=t.parentElement;if(n){n.appendChild(e),e.textContent=t.value.substring(0,a);let s=document.createElement("span");s.textContent=".",e.appendChild(s);let l=s.offsetTop-t.scrollTop,r=s.offsetLeft-t.scrollLeft;O({top:l+s.offsetHeight+8,left:r}),n.removeChild(e)}}p(!0),L(0)}else p(!1),P(null)};if(n.endsWith("##"))l(["UseCase","Description","Solution","Alternative Solution","Steps"].filter(e=>!s.includes("## ".concat(e))),"section");else if(/@(\w*)$/.test(n)){let e=n.match(/@(\w*)$/);if(e){let s=e[1];l(m.map(e=>e.name).filter(e=>e.toLowerCase().startsWith(s.toLowerCase())),"tool")}}else p(!1),P(null);V()},onKeyDown:e=>{h&&("ArrowDown"===e.key?(e.preventDefault(),L(e=>(e+1)%U.length)):"ArrowUp"===e.key?(e.preventDefault(),L(e=>(e-1+U.length)%U.length)):"Enter"===e.key||"Tab"===e.key?(e.preventDefault(),U[z]&&W(U[z])):"Escape"===e.key&&(e.preventDefault(),p(!1),P(null))),setTimeout(V,0)},onScroll:()=>{u.current&&x.current&&(u.current.scrollTop=x.current.scrollTop,u.current.scrollLeft=x.current.scrollLeft),h&&p(!1)},onBlur:()=>{q(null),null==d||d()},onFocus:()=>{V()},onClick:V,placeholder:"Enter your prompt here...",className:"relative w-full h-full resize-none font-mono text-sm rounded-lg bg-transparent text-transparent caret-foreground"}),(0,a.jsx)(C.Wv,{asChild:!0,children:(0,a.jsx)("div",{style:{position:"absolute",...S,width:0,height:0}})}),(0,a.jsx)(C.hl,{className:"w-auto p-1",onOpenAutoFocus:e=>e.preventDefault(),sideOffset:5,align:"start",children:(0,a.jsx)("ul",{className:"p-1",children:U.map((e,s)=>(0,a.jsx)("li",{onMouseDown:s=>{s.preventDefault(),W(e)},className:(0,b.cn)("p-2 text-sm rounded-sm cursor-pointer hover:bg-accent",s===z&&"bg-accent"),children:e},"".concat(e,"-").concat(s)))})})]})]})})]})}var z=t(2447),L=t(1480),U=t(5866),_=t(2274),$=t(2111),P=t(3630),F=t(7037),q=t(1647);function Z(e){let{testCases:s,isTesting:t,onGenerateTestCases:n,isGeneratingTests:l,onPlayTestCase:r,onRunTests:i,useCaseId:c,onTestCaseSelect:d,onDeleteTestCase:m,onToggleContract:u}=e;return(0,a.jsxs)(N.Zp,{className:"h-full border-0 bg-transparent shadow-none flex flex-col",children:[(0,a.jsxs)(N.aR,{className:"p-4 flex flex-row items-center justify-between gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(z.A,{className:"h-5 w-5 text-primary"}),(0,a.jsx)(N.ZB,{className:"text-lg font-semibold",children:"Test Cases"}),(0,a.jsx)(q.E,{variant:"secondary",children:s.length})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(w.$,{onClick:i,disabled:t||!c,size:"sm",variant:"outline",children:[t?(0,a.jsx)(o.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,a.jsx)(L.A,{className:"mr-2 h-4 w-4"}),"Run Tests"]}),(0,a.jsxs)(w.$,{variant:"outline",size:"icon",className:"h-8 w-8 shrink-0",onClick:n,disabled:l||!c,children:[l?(0,a.jsx)(o.A,{className:"h-4 w-4 animate-spin"}):(0,a.jsx)(U.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Generate TestCases"})]})]})]}),(0,a.jsx)(N.Wu,{className:"p-4 pt-0 flex-1 min-h-0",children:(0,a.jsx)(F.F,{className:"h-full",children:0===s.length?(0,a.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,a.jsx)("p",{className:"text-sm text-muted-foreground text-center px-4",children:"No test cases found. Generate them with AI."})}):(0,a.jsx)("div",{className:"space-y-2",children:s.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between rounded-lg border p-3 hover:bg-accent group",children:[(0,a.jsxs)("div",{className:"w-full text-left h-auto flex flex-row items-center cursor-pointer",onClick:()=>d(e.id),children:[(0,a.jsxs)(w.$,{variant:"ghost",size:"icon",className:"h-8 w-8 shrink-0 mr-2",onClick:s=>{s.stopPropagation(),u(e.id)},children:[(0,a.jsx)(_.A,{className:(0,b.cn)("h-4 w-4",e.contract?"text-blue-500":"text-gray-400")}),(0,a.jsx)("span",{className:"sr-only",children:"Toggle contract"})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("p",{className:"font-medium text-sm",children:e.name}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground font-normal",children:e.description})]})]}),(0,a.jsxs)("div",{className:"flex items-center opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,a.jsxs)(w.$,{variant:"ghost",size:"icon",className:"h-8 w-8 shrink-0",onClick:s=>{s.stopPropagation(),r(e)},children:[(0,a.jsx)($.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Play test case"})]}),(0,a.jsxs)(w.$,{variant:"ghost",size:"icon",className:"h-8 w-8 shrink-0",onClick:s=>m(s,e.id),children:[(0,a.jsx)(P.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Delete test case"})]})]})]},e.id))})})})]})}var H=t(7314),J=t(5418),V=t(6710),M=t(406),W=t(8068),B=t(3773);t(1189);var G=t(5379);function K(e){let{value:s,label:t}=e,{resolvedTheme:n}=(0,G.D)();return(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("div",{style:{width:"100px",height:"100px"},children:(0,a.jsx)(B.QF,{value:s,text:"".concat(s.toFixed(0)),strokeWidth:10,styles:(0,B.Hf)({pathColor:"hsl(var(--chart-2))",textColor:"dark"===n?"hsl(210 40% 98%)":"hsl(221.2 83.2% 53.3%)",trailColor:"hsl(var(--muted))",pathTransitionDuration:.5})})}),(0,a.jsx)("p",{className:"text-sm font-medium text-muted-foreground mt-2",children:t})]})}var Q=t(984);function Y(e){let{verdict:s}=e;if(!s)return null;let t=s.toLowerCase();return"good"===t||"pass"===t?(0,a.jsxs)("div",{className:"flex items-center gap-2 text-green-600 dark:text-green-500",children:[(0,a.jsx)(Q.A,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"font-semibold",children:s})]}):"partial"===t?(0,a.jsxs)("div",{className:"flex items-center gap-2 text-yellow-600 dark:text-yellow-500",children:[(0,a.jsx)(M.A,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"font-semibold",children:s})]}):(0,a.jsxs)("div",{className:"flex items-center gap-2 text-red-600 dark:text-red-500",children:[(0,a.jsx)(W.A,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"font-semibold",children:s})]})}var X=t(3496);function ee(e){let{message:s}=e,t="user"===s.role;return(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full ".concat(t?"bg-secondary text-secondary-foreground":"bg-primary text-primary-foreground"),children:t?(0,a.jsx)(H.A,{className:"h-5 w-5"}):(0,a.jsx)(J.A,{className:"h-5 w-5"})}),(0,a.jsx)("div",{className:"flex-1 space-y-2",children:(0,a.jsx)("div",{className:"rounded-lg border p-3 text-sm bg-card",children:(0,a.jsx)("pre",{className:"whitespace-pre-wrap font-sans",children:s.content})})})]})}function es(e){let{accuracy:s,results:t,verdict:n,reasons:l,missingRequirements:r,violations:i,onViewTestCase:c,isTesting:d}=e,m=null!==s,u=t&&t.length>0,x=null!==n||null!==l&&l.length>0||r&&r.length>0||i&&i.length>0,h=!m&&!u&&!x;return(0,a.jsxs)(N.Zp,{className:"border-0 bg-transparent shadow-none",children:[(0,a.jsxs)(N.aR,{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(V.A,{className:"h-5 w-5 text-primary"}),(0,a.jsx)(N.ZB,{className:"text-lg font-semibold",children:"Performance"})]}),(0,a.jsx)(N.BT,{className:"text-xs",children:"Results from test executions."})]}),(0,a.jsx)(N.Wu,{className:"p-4 pt-0",children:d?(0,a.jsx)("div",{className:"flex h-48 items-center justify-center rounded-lg border",children:(0,a.jsx)(o.A,{className:"h-8 w-8 animate-spin"})}):h?(0,a.jsx)("div",{className:"flex h-48 items-center justify-center rounded-lg border text-center",children:(0,a.jsx)("p",{className:"text-sm text-muted-foreground px-4",children:"Run Tests to see performance results."})}):(0,a.jsxs)("div",{className:"flex flex-col gap-6",children:[m&&(0,a.jsx)("div",{className:"rounded-lg border p-4 flex justify-center items-center",children:(0,a.jsx)(K,{value:s||0,label:"Overall Score"})}),u&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"font-semibold px-1 text-sm",children:"Individual Test Results"}),(0,a.jsx)(X.nD,{type:"single",collapsible:!0,className:"w-full space-y-2",children:t.map((e,s)=>{var t,n,l,r,i;return(0,a.jsx)(X.As,{value:"item-".concat(s),className:"border-b-0",children:(0,a.jsxs)("div",{className:"rounded-lg border",children:[(0,a.jsx)(X.$m,{className:"px-4 py-2 text-sm hover:no-underline",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 w-full",children:[(0,a.jsx)(Y,{verdict:null==(t=e.details)?void 0:t.verdict}),(0,a.jsx)("span",{className:"flex-1 text-left font-medium",title:e.testCaseName,children:e.testCaseName}),null!==e.score&&void 0!==e.score&&(0,a.jsx)(q.E,{variant:"outline",className:"font-mono",children:e.score.toFixed(0)})]})}),(0,a.jsx)(X.ub,{className:"px-4 pb-4",children:(0,a.jsxs)("div",{className:"flex flex-col gap-4 mt-2 border-t pt-4",children:[(null==(n=e.details)?void 0:n.reasons)&&e.details.reasons.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold",children:"Reasons"}),(0,a.jsx)("ul",{className:"list-disc list-inside space-y-1 text-sm text-muted-foreground",children:e.details.reasons.map((e,s)=>(0,a.jsx)("li",{children:e},s))})]}),(null==(l=e.details)?void 0:l.evidence)&&e.details.evidence.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold",children:"Evidence"}),(0,a.jsx)("ul",{className:"list-disc list-inside space-y-1 text-sm text-muted-foreground",children:e.details.evidence.map((e,s)=>(0,a.jsxs)("li",{children:[(0,a.jsx)("span",{className:"font-semibold text-foreground",children:"Expected:"})," ",e.mapsTo," ",(0,a.jsx)("br",{}),(0,a.jsx)("span",{className:"font-semibold text-foreground",children:" Actual: "})," ",e.quote]},s))})]}),(null==(r=e.details)?void 0:r.missingRequirements)&&e.details.missingRequirements.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("h4",{className:"font-semibold text-yellow-600 dark:text-yellow-500 flex items-center gap-2",children:[(0,a.jsx)(M.A,{className:"h-4 w-4"}),"Missing Requirements"]}),(0,a.jsx)("ul",{className:"list-disc list-inside space-y-1 text-sm text-muted-foreground",children:e.details.missingRequirements.map((e,s)=>(0,a.jsx)("li",{children:e},s))})]}),(null==(i=e.details)?void 0:i.violations)&&e.details.violations.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("h4",{className:"font-semibold text-red-600 dark:text-red-500 flex items-center gap-2",children:[(0,a.jsx)(W.A,{className:"h-4 w-4"}),"Violations"]}),(0,a.jsx)("ul",{className:"list-disc list-inside space-y-1 text-sm text-muted-foreground",children:e.details.violations.map((e,s)=>(0,a.jsx)("li",{children:e},s))})]}),e.useCases&&e.useCases.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold",children:"Use Cases Applied"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:e.useCases.map((e,s)=>(0,a.jsx)(q.E,{variant:"secondary",children:e},s))})]}),e.actualConversation&&e.actualConversation.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold",children:"Actual Conversation"}),(0,a.jsx)("div",{className:"mt-2 space-y-4",children:e.actualConversation.map((e,s)=>(0,a.jsx)(ee,{message:e},s))})]}),(0,a.jsx)("div",{className:"flex justify-end pt-4",children:(0,a.jsx)(w.$,{variant:"link",size:"sm",onClick:()=>c(e.testCaseId),children:"View Test Case"})})]})})]})},s)})})]}),!u&&(0,a.jsxs)(a.Fragment,{children:[n&&(0,a.jsx)("div",{className:"rounded-lg border p-2 flex justify-center items-center",children:(0,a.jsx)(Y,{verdict:n})}),m&&!u&&(0,a.jsx)("div",{className:"rounded-lg border p-4 flex justify-center items-center",children:(0,a.jsx)(K,{value:s,label:"Score"})}),l&&l.length>0&&(0,a.jsx)("div",{className:"space-y-4 rounded-lg border bg-card p-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold",children:"Reasons"}),(0,a.jsx)("ul",{className:"list-disc list-inside space-y-1 text-sm text-muted-foreground",children:l.map((e,s)=>(0,a.jsx)("li",{children:e},s))})]})}),r&&r.length>0&&(0,a.jsx)("div",{className:"space-y-4 rounded-lg border bg-card p-4",children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("h4",{className:"font-semibold text-yellow-600 dark:text-yellow-500 flex items-center gap-2",children:[(0,a.jsx)(M.A,{className:"h-4 w-4"}),"Missing Requirements"]}),(0,a.jsx)("ul",{className:"list-disc list-inside space-y-1 text-sm text-muted-foreground",children:r.map((e,s)=>(0,a.jsx)("li",{children:e},s))})]})}),i&&i.length>0&&(0,a.jsx)("div",{className:"space-y-4 rounded-lg border bg-card p-4",children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("h4",{className:"font-semibold text-red-600 dark:text-red-500 flex items-center gap-2",children:[(0,a.jsx)(W.A,{className:"h-4 w-4"}),"Violations"]}),(0,a.jsx)("ul",{className:"list-disc list-inside space-y-1 text-sm text-muted-foreground",children:i.map((e,s)=>(0,a.jsx)("li",{children:e},s))})]})})]})]})})]})}var et=t(9338),ea=t(8332),en=t(1834);function el(e){let{prompt:s,useCaseId:t,onAcceptSuggestion:l}=e,[r,c]=(0,n.useState)(null),[d,m]=(0,n.useState)(!1),[u,x]=(0,i.n_)(R.Lp),h=async()=>{var e,a;if(c(null),!s||!t){c({improvements:[],error:"A UseCase ID and prompt content are required."}),m(!0);return}let n=await x({useCase:s});n.error?c({improvements:[],error:n.error.message}):(null==(a=n.data)||null==(e=a.improveUseCase)?void 0:e.improvements)?c({improvements:n.data.improveUseCase.improvements}):c({improvements:[]}),m(!0)},p=()=>{m(!1),c(null)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(N.Zp,{className:"border-0 bg-transparent shadow-none",children:[(0,a.jsxs)(N.aR,{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(et.A,{className:"h-5 w-5 text-primary"}),(0,a.jsx)(N.ZB,{className:"text-lg font-semibold",children:"AI Suggestions"})]}),(0,a.jsx)(N.BT,{className:"text-xs",children:"Improve your UseCase prompt based on AI analysis."})]}),(0,a.jsx)(N.Wu,{className:"p-4 pt-0",children:(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)(w.$,{onClick:h,disabled:u.fetching||!t||!s,variant:"outline",size:"sm",children:u.fetching?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Analyzing..."]}):"Get Suggestions"})})})]}),(0,a.jsx)(en.lG,{open:d,onOpenChange:p,children:(0,a.jsxs)(en.Cf,{className:"sm:max-w-2xl",children:[(0,a.jsxs)(en.c7,{children:[(0,a.jsx)(en.L3,{children:"AI Suggestions"}),(0,a.jsx)(en.rr,{children:"Here are some suggestions to improve your UseCase prompt."})]}),(0,a.jsx)(F.F,{className:"max-h-[60vh] pr-6",children:(0,a.jsx)("div",{className:"my-4",children:r&&(0,a.jsx)(a.Fragment,{children:r.error?(0,a.jsxs)(ea.Fc,{variant:"destructive",children:[(0,a.jsx)(ea.XL,{children:"Error"}),(0,a.jsx)(ea.TN,{children:r.error})]}):r.improvements.length>0?(0,a.jsx)(X.nD,{type:"single",collapsible:!0,className:"w-full",children:r.improvements.map((e,s)=>(0,a.jsxs)(X.As,{value:"item-".concat(s),children:[(0,a.jsx)(X.$m,{className:"text-left text-sm hover:no-underline",children:e.issue}),(0,a.jsx)(X.ub,{children:(0,a.jsxs)("div",{className:"space-y-4 pt-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold",children:"Suggestion"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:e.suggestion})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold",children:"Example Improved Use Case"}),(0,a.jsx)("pre",{className:"mt-2 text-sm text-muted-foreground bg-muted p-2 rounded-md whitespace-pre-wrap font-mono",children:e.improved_use_case})]}),(0,a.jsx)("div",{className:"flex justify-end pt-2",children:(0,a.jsx)(w.$,{size:"sm",onClick:()=>{l(e.improved_use_case),p()},children:"Accept Suggestion"})})]})})]},s))}):(0,a.jsx)("div",{className:"rounded-lg border bg-card p-4 text-center",children:(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"No suggestions available at the moment."})})})})}),(0,a.jsx)(en.Es,{children:(0,a.jsx)(w.$,{onClick:p,children:"Close"})})]})})]})}var er=t(6789),ei=t(5253),ec=t(8503),eo=t(5142);function ed(e){let{utterances:s,onRemoveUtterance:t,onAddUtterance:l,onRegenerate:r,isGenerating:i,disabled:c,onPlayUtterance:d}=e,[m,u]=(0,n.useState)(""),h=()=>{m.trim()&&(l(m.trim()),u(""))};return(0,a.jsxs)(N.Zp,{className:"border-0 bg-transparent shadow-none h-full flex flex-col",children:[(0,a.jsxs)(N.aR,{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(ei.A,{className:"h-5 w-5 text-primary"}),(0,a.jsx)(N.ZB,{className:"text-lg font-semibold",children:"Example Utterances"}),s&&(0,a.jsx)(q.E,{variant:"secondary",children:s.length})]}),(0,a.jsxs)(w.$,{onClick:r,disabled:i||c,size:"icon",variant:"outline",className:"h-8 w-8",children:[i?(0,a.jsx)(o.A,{className:"h-4 w-4 animate-spin"}):(0,a.jsx)(U.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Regenerate examples"})]})]}),(0,a.jsx)(N.BT,{className:"text-xs",children:"A list of example user inputs."})]}),(0,a.jsxs)(N.Wu,{className:"p-4 pt-0 flex-1 flex flex-col gap-4 min-h-0",children:[(0,a.jsx)(F.F,{className:"rounded-lg border flex-1",children:null===s?(0,a.jsx)("p",{className:"p-4 text-sm text-muted-foreground text-center",children:"Click regenerate to load examples."}):s.length>0?(0,a.jsx)("ul",{className:"space-y-2 p-4",children:s.map((e,s)=>(0,a.jsxs)("li",{className:"group flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-muted-foreground flex-1",children:e}),(0,a.jsxs)("div",{className:"flex items-center opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,a.jsxs)(w.$,{variant:"ghost",size:"icon",className:"h-6 w-6 shrink-0",onClick:()=>d(e),disabled:c,children:[(0,a.jsx)($.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Play"})]}),(0,a.jsxs)(w.$,{variant:"ghost",size:"icon",className:"h-6 w-6 shrink-0",onClick:()=>t(s),children:[(0,a.jsx)(ec.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Remove"})]})]})]},s))}):(0,a.jsx)("p",{className:"p-4 text-sm text-muted-foreground text-center",children:"No example utterances."})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(eo.p,{placeholder:"Add an utterance...",value:m,onChange:e=>u(e.target.value),onKeyDown:e=>{"Enter"===e.key&&h()},disabled:c}),(0,a.jsxs)(w.$,{onClick:h,variant:"secondary",size:"icon",className:"shrink-0",disabled:!m.trim()||c,children:[(0,a.jsx)(x.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Add"})]})]})]})]})}var em=t(4979),eu=t(6444),ex=t(7063),eh=t(7614);function ep(e){let{isOpen:s,onOpenChange:t,onSaveTest:l}=e,[r,i]=(0,n.useState)(""),[c,o]=(0,n.useState)(""),{toast:d}=(0,D.dj)();return(0,n.useEffect)(()=>{s||(i(""),o(""))},[s]),(0,a.jsx)(en.lG,{open:s,onOpenChange:t,children:(0,a.jsxs)(en.Cf,{children:[(0,a.jsxs)(en.c7,{children:[(0,a.jsx)(en.L3,{children:"Save as Test Case"}),(0,a.jsx)(en.rr,{children:"This will save the current conversation as a new test case."})]}),(0,a.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(eu.J,{htmlFor:"name",children:"Name"}),(0,a.jsx)(eo.p,{id:"name",value:r,onChange:e=>i(e.target.value),placeholder:"e.g. Successful password reset"})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(eu.J,{htmlFor:"description",children:"Description (optional)"}),(0,a.jsx)(eo.p,{id:"description",value:c,onChange:e=>o(e.target.value),placeholder:"e.g. Test for when user provides correct info"})]})]}),(0,a.jsx)(en.Es,{children:(0,a.jsx)(w.$,{onClick:()=>{if(!r.trim())return void d({variant:"destructive",title:"Name is required",description:"Please provide a name for the test case."});l(r,c)},disabled:!r.trim(),children:"Save"})})]})})}function ef(e){let{messages:s,isThinking:t,isEditing:n,onMessageChange:l,onRemoveMessage:r,onRoleChange:i}=e;return(0,a.jsx)(F.F,{className:"flex-1 pr-4 -mr-4",children:(0,a.jsxs)("div",{className:"space-y-6 pr-4",children:[s.map((e,s)=>(0,a.jsx)(eh.A,{message:e,isEditing:n,onContentChange:e=>l(s,e),onRemove:()=>r(s),onRoleChange:e=>i(s,e)},s)),t&&!n&&(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full bg-primary text-primary-foreground",children:(0,a.jsx)(J.A,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{className:"flex-1 rounded-lg border p-4 text-sm bg-card flex items-center gap-2",children:[(0,a.jsx)(o.A,{className:"h-4 w-4 animate-spin"}),(0,a.jsx)("span",{children:"Thinking..."})]})]})]})})}function eg(e){let{onSubmit:s,isThinking:t,onRegenerate:l,canRegenerate:r}=e,[i,c]=(0,n.useState)("");return(0,a.jsx)("div",{className:"border-t pt-4 mt-4",children:(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),i.trim()&&(s(i),c(""))},className:"flex items-center gap-2",children:[(0,a.jsx)(eo.p,{value:i,onChange:e=>c(e.target.value),placeholder:"Type a message...",disabled:t}),(0,a.jsxs)(w.$,{type:"submit",size:"icon",disabled:t||!i.trim(),children:[(0,a.jsx)(em.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Send"})]}),(0,a.jsxs)(w.$,{variant:"ghost",size:"icon",onClick:e=>{e.preventDefault(),l()},disabled:!r||t,children:[(0,a.jsx)(U.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Regenerate response"})]})]})})}function ej(e){let{isOpen:s,onOpenChange:t,useCaseId:l,prompt:r,utterance:c,historyItem:o,onSaveHistory:d,onSaveAsTest:m}=e,[u,p]=(0,n.useState)([]),[f,g]=(0,n.useState)(!1),{toast:j}=(0,D.dj)(),[N,y]=(0,n.useState)(!1),[b,C]=(0,n.useState)(!1),S=(0,n.useRef)(""),[k,A]=(0,i.n_)(R.of),T=(0,n.useCallback)(e=>{g(!0),A({input:{useCasesId:l,request:{messages:e.map(e=>{let{role:s,content:t,format:a}=e;return{role:s,content:t,format:a}}),userContext:{profile:[]},systemContext:[],conversationContext:{conversationId:S.current}}}}).then(e=>{let{data:s,error:t}=e;if(g(!1),t)j({variant:"destructive",title:"Error getting assistant response",description:t.message}),p(e=>[...e,{role:"assistant",content:"Sorry, I encountered an error.",format:"text"}]);else if(null==s?void 0:s.assistant){var a,n;let e=(s.assistant.messages||[]).map(e=>{let{__typename:s,...t}=e;return t}),t=null==(a=s.assistant.context)?void 0:a.map(e=>{let{__typename:s,...t}=e;return t}),l=null==(n=s.assistant.toolCalls)?void 0:n.map(e=>{let{__typename:s,...t}=e;return t});if(e.length>0){let s=e[e.length-1];"assistant"===s.role&&(t&&t.length>0&&(s.context=t),l&&l.length>0&&(s.toolCalls=l)),p(s=>[...s,...e])}else if(l&&l.length>0){let e={role:"assistant",content:"",format:"text",toolCalls:l};t&&t.length>0&&(e.context=t),p(s=>[...s,e])}}})},[A,l,j]),E=(0,n.useCallback)(e=>{let s=[...u,{role:"user",content:e,format:"text"}];p(s),T(s)},[u,T]);(0,n.useEffect)(()=>{if(s){if(S.current="conv-".concat(Date.now()),o)p(o.messages),g(!1);else if(c){let e=[{role:"user",content:c,format:"text"}];p(e),T(e)}else p([]),g(!1);C(!1)}},[s,c,o,T]);let I=(0,n.useCallback)(async()=>{if(f)return;let e=u.filter(e=>"user"===e.role);if(0===e.length)return void j({variant:"default",title:"Nothing to regenerate",description:"No user messages to replay."});g(!0);let s=[];p(s);let t="conv-".concat(Date.now());for(let r of e){p([...s=[...s,r]]);let e={messages:s.map(e=>{let{role:s,content:t,format:a}=e;return{role:s,content:t,format:a}}),userContext:{profile:[]},systemContext:[],conversationContext:{conversationId:t}},{data:i,error:c}=await A({input:{useCasesId:l,request:e}});if(c){j({variant:"destructive",title:"Error getting assistant response",description:c.message}),p([...s=[...s,{role:"assistant",content:"Sorry, I encountered an error.",format:"text"}]]);break}if(null==i?void 0:i.assistant){var a,n;let e=(i.assistant.messages||[]).map(e=>{let{__typename:s,...t}=e;return t}),t=null==(a=i.assistant.context)?void 0:a.map(e=>{let{__typename:s,...t}=e;return t}),l=null==(n=i.assistant.toolCalls)?void 0:n.map(e=>{let{__typename:s,...t}=e;return t}),r=[...s];if(e.length>0){let s=e[e.length-1];"assistant"===s.role&&(t&&t.length>0&&(s.context=t),l&&l.length>0&&(s.toolCalls=l)),r.push(...e)}else if(l&&l.length>0){let e={role:"assistant",content:"",format:"text",toolCalls:l};t&&t.length>0&&(e.context=t),r.push(e)}p([...s=r])}}g(!1)},[f,u,l,A,j]);return(0,a.jsx)(ex.cj,{open:s,onOpenChange:e=>{if(!e&&u.length>0&&!o&&!b){let e=u.find(e=>"user"===e.role),s=u.find(e=>"assistant"===e.role);e&&s&&d({utterance:e.content,useCaseId:l,modelResponse:s.content},u,r)}t(e)},children:(0,a.jsxs)(ex.h,{className:"w-full sm:max-w-xl flex flex-col",children:[(0,a.jsxs)(ex.Fm,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(ex.qp,{children:"Chat Playground"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 relative right-4",children:[(0,a.jsxs)(w.$,{variant:"outline",size:"sm",onClick:()=>C(!b),children:[(0,a.jsx)(h.A,{className:"mr-2 h-4 w-4"}),b?"Done":"Edit"]}),(0,a.jsxs)(w.$,{variant:"outline",size:"sm",disabled:0===u.length||b,onClick:()=>y(!0),children:[(0,a.jsx)(v.A,{className:"mr-2 h-4 w-4"}),"Save as Test Case"]})]})]}),(0,a.jsx)(ex.Qs,{children:b?"Add, edit, or remove messages in the conversation.":"Test your UseCase prompt with a sample utterance."})]}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col min-h-0 mt-4",children:[(0,a.jsx)(ef,{messages:u,isThinking:f,isEditing:b,onMessageChange:(e,s)=>{let t=[...u];t[e].content=s,p(t)},onRemoveMessage:e=>{p(s=>s.filter((s,t)=>t!==e))},onRoleChange:(e,s)=>{let t=[...u];t[e].role=s,p(t)}}),b?(0,a.jsx)("div",{className:"border-t pt-4 mt-4 space-y-2",children:(0,a.jsxs)(w.$,{onClick:()=>{p(e=>[...e,{role:"user",content:"",format:"text"}])},className:"w-full",variant:"outline",children:[(0,a.jsx)(x.A,{className:"mr-2 h-4 w-4"})," Add Message"]})}):(0,a.jsx)(eg,{onSubmit:E,isThinking:f,onRegenerate:I,canRegenerate:!f&&u.some(e=>"user"===e.role)})]}),(0,a.jsx)(ep,{isOpen:N,onOpenChange:y,onSaveTest:(e,s)=>{m({name:e,description:s,expectedConversation:u}),y(!1),j({title:"Test Case Saved",description:'"'.concat(e,'" has been added to your test cases.')})}})]})})}let ev=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:s,className:(0,b.cn)("w-full caption-bottom text-sm",t),...n})})});ev.displayName="Table";let eN=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("thead",{ref:s,className:(0,b.cn)("[&_tr]:border-b",t),...n})});eN.displayName="TableHeader";let ey=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("tbody",{ref:s,className:(0,b.cn)("[&_tr:last-child]:border-0",t),...n})});ey.displayName="TableBody",n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("tfoot",{ref:s,className:(0,b.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...n})}).displayName="TableFooter";let ew=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("tr",{ref:s,className:(0,b.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...n})});ew.displayName="TableRow";let eb=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("th",{ref:s,className:(0,b.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...n})});eb.displayName="TableHead";let eC=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("td",{ref:s,className:(0,b.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...n})});function eS(e){let{isOpen:s,onOpenChange:t,history:n,onHistoryItemClick:l}=e;return(0,a.jsx)(ex.cj,{open:s,onOpenChange:t,children:(0,a.jsxs)(ex.h,{className:"w-full sm:max-w-2xl",children:[(0,a.jsxs)(ex.Fm,{children:[(0,a.jsxs)(ex.qp,{className:"flex items-center gap-2",children:[(0,a.jsx)(m.A,{className:"h-5 w-5"}),"Chat History"]}),(0,a.jsx)(ex.Qs,{children:"A log of previous interactions with the assistant. Click a row to view the conversation."})]}),(0,a.jsx)(F.F,{className:"h-[calc(100vh-8rem)] pr-4 mt-4",children:(0,a.jsxs)(ev,{children:[(0,a.jsx)(eN,{children:(0,a.jsxs)(ew,{children:[(0,a.jsx)(eb,{children:"Utterance"}),(0,a.jsx)(eb,{children:"UseCase ID"}),(0,a.jsx)(eb,{children:"Response"})]})}),(0,a.jsx)(ey,{children:n.map(e=>(0,a.jsxs)(ew,{onClick:()=>l(e),className:"cursor-pointer",children:[(0,a.jsx)(eC,{className:"max-w-[200px] truncate",children:e.utterance}),(0,a.jsx)(eC,{children:(0,a.jsx)(q.E,{variant:"outline",className:"font-mono",children:e.useCaseId})}),(0,a.jsx)(eC,{className:"max-w-[200px] truncate",children:e.modelResponse})]},e.id))})]})})]})})}eC.displayName="TableCell",n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("caption",{ref:s,className:(0,b.cn)("mt-4 text-sm text-muted-foreground",t),...n})}).displayName="TableCaption";var ek=t(3262),eA=t(1255),eT=t(6615);function eE(e){let{tags:s,onTagsChange:t}=e,[l,r]=(0,n.useState)(""),i=()=>{l.trim()&&!s.includes(l.trim())&&(t([...s,l.trim()]),r(""))};return(0,a.jsxs)(C.AM,{children:[(0,a.jsx)(C.Wv,{asChild:!0,children:(0,a.jsxs)(w.$,{variant:"outline",size:"sm",children:[(0,a.jsx)(eA.A,{className:"mr-2 h-4 w-4"}),"Tags (",s.length,")"]})}),(0,a.jsx)(C.hl,{className:"w-80",children:(0,a.jsxs)("div",{className:"grid gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"font-medium leading-none",children:"Tags"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Add or remove tags for this UseCase prompt."})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(eo.p,{value:l,onChange:e=>r(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),i())},placeholder:"Add a tag..."}),(0,a.jsxs)(w.$,{onClick:i,size:"icon",variant:"secondary",className:"shrink-0",children:[(0,a.jsx)(x.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Add tag"})]})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:s.map(e=>(0,a.jsxs)(q.E,{variant:"secondary",className:"flex items-center gap-1",children:[e,(0,a.jsxs)("button",{onClick:()=>{t(s.filter(s=>s!==e))},className:"rounded-full hover:bg-muted-foreground/20",children:[(0,a.jsx)(eT.A,{className:"h-3 w-3"}),(0,a.jsxs)("span",{className:"sr-only",children:["Remove ",e]})]})]},e))})]})})]})}var eR=t(8053),eD=t(7599);let eI=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(eD.bL,{className:(0,b.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...n,ref:s,children:(0,a.jsx)(eD.zi,{className:(0,b.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});eI.displayName=eD.bL.displayName;var eO=t(1186);let ez=e=>{let s=(null==e?void 0:e.replace(/\s+/g,"-").toLowerCase())||"my_id";return{id:s,createdAt:"",tags:[],content:"## UseCase: ".concat(s,"\n\n## Description\n\n## Solution\n\n"),output:null}};function eL(){var e,s;let t=(0,c.useSearchParams)(),l=(0,c.useRouter)(),f=t.get("id"),g=t.get("new_id"),j=(0,n.useRef)(null),[v,b]=(0,i.IT)({query:ek.PW,variables:{id:f},pause:!f,requestPolicy:"cache-and-network"}),{data:C,fetching:S,error:k}=v,A=(0,n.useMemo)(()=>ez(g),[g]),[T,E]=(0,n.useState)(A.content),[I,z]=(0,n.useState)(A.content),[L,U]=(0,n.useState)(""),[_,$]=(0,n.useState)(""),[P,q]=(0,n.useState)(A.createdAt),[H,J]=(0,n.useState)(A.tags),[V,M]=(0,n.useState)(A.tags),[W,B]=(0,n.useState)([]),[G,K]=(0,n.useState)(null),[Q,Y]=(0,n.useState)(null),[X,ee]=(0,n.useState)(null),[et,ea]=(0,n.useState)(null),[en,ei]=(0,n.useState)(null),[ec,em]=(0,n.useState)(null),[ep,ef]=(0,n.useState)([]),[eg,ev]=(0,n.useState)([]),[eN,ey]=(0,n.useState)(!1),[ew,eb]=(0,n.useState)(!1),{toast:eC}=(0,D.dj)(),[eA,eT]=(0,n.useState)(!1),[eD,eL]=(0,n.useState)(null),[eU,e_]=(0,n.useState)(!1),[e$,eP]=(0,n.useState)([]),[eF,eq]=(0,n.useState)(null),[eZ,eH]=(0,n.useState)(!1),[eJ,eV]=(0,n.useState)(!1),[eM,eW]=(0,n.useState)(null),[eB,eG]=(0,n.useState)(null),[eK,eQ]=(0,n.useState)(!1),[eY,eX]=(0,n.useState)(!1),[e0,e4]=(0,n.useState)(!1),[e1,e2]=(0,n.useState)(!1),[e5,e6]=(0,n.useState)(null),[e8,e3]=(0,n.useState)(!1),[e9,e7]=(0,n.useState)([]),[se,ss]=(0,n.useState)(null),[st,sa]=(0,i.IT)({query:ek.Cn,variables:{useCaseId:_},pause:!_}),{data:sn,fetching:sl,error:sr}=st,[si,sc]=(0,i.n_)(R.n$),[so,sd]=(0,i.n_)(R.Q6),[sm,su]=(0,i.n_)(R.w8),[sx,sh]=(0,i.n_)(R.I6),[sp,sf]=(0,i.n_)(R.v3),[sg,sj]=(0,i.n_)(R.Tc),[sv,sN]=(0,i.n_)(R.xu),[sy,sw]=(0,i.n_)(R.t5),[sb,sC]=(0,i.n_)(R.K1),[sS]=(0,i.IT)({query:ek.qS});(0,n.useEffect)(()=>{var e;(null==(e=sS.data)?void 0:e.getMcpTools)&&e7(sS.data.getMcpTools)},[sS.data]);let[sk,sA]=(0,i.IT)({query:ek.s_,requestPolicy:"cache-and-network"}),sT=(null==(e=sk.data)?void 0:e.widgets)||[],sE=T!==I,sR=JSON.stringify(ep)!==JSON.stringify(eg),sD=JSON.stringify(H)!==JSON.stringify(V),sI=sE||sR;(0,n.useEffect)(()=>{f&&!_?$(f):g&&!_&&$(g)},[f,g,_]);let sO=(0,n.useCallback)(()=>{if(!eZ){if(eH(!0),!T.trim()){eC({variant:"destructive",title:"Cannot save prompt",description:"Prompt content cannot be empty."}),eH(!1);return}if(!_){eC({variant:"destructive",title:"UseCase ID is missing",description:"A UseCase ID could not be determined for this prompt."}),eH(!1);return}sd({id:_,createdAt:(P&&!isNaN(Date.parse(P))?new Date(P):new Date).toISOString().split("T")[0],tags:H,content:T,examples:ep||[]}).then(e=>{let{data:s,error:t}=e;t?eC({variant:"destructive",title:"Error storing UseCase Prompt",description:t.message}):(null==s?void 0:s.store)&&(z(T),ev(ep||[]),eC({title:"UseCase Prompt Stored",description:s.store.message}),f||l.push("/prompts?id=".concat(_),{scroll:!1}))}).finally(()=>{eH(!1)})}},[eZ,T,P,H,ep,f,_,sd,eC,l]),sz=(0,n.useCallback)(()=>{!eJ&&_&&(eV(!0),su({id:_,tags:H}).then(e=>{let{data:s,error:t}=e;t?eC({variant:"destructive",title:"Error updating tags",description:t.message}):(null==s?void 0:s.updateTags)&&(M(H),eC({title:"Tags Updated",description:s.updateTags.message||"Tags saved successfully."}))}).finally(()=>{eV(!1)}))},[eJ,_,H,su,eC]);(0,n.useEffect)(()=>{if(f&&!S&&(null==C?void 0:C.searchById)){if(j.current!==f){let e=C.searchById,s=e.content;E(s),z(s),J(e.tags||[]),M(e.tags||[]),q(e.createdAt),ss(e.output||null);let t=e.examples||[];ef(t),ev(t),_||$(f),K(null),Y(null),ee(null),ea(null),ei(null),em(null),sa({requestPolicy:"network-only"}),j.current=f}}else if(k)eC({variant:"destructive",title:"Error loading prompt",description:k.message});else if(!f&&null!==j.current){let e=ez(g);E(e.content),z(e.content),_||$(e.id),J(e.tags),M(e.tags),q(e.createdAt),ss(e.output||null),ef([]),ev([]),K(null),Y(null),ee(null),ea(null),ei(null),em(null),B([]),j.current=null}},[f,C,S,k,sa,eC,g,_]),(0,n.useEffect)(()=>{if(!f&&j.current){let e=ez(g);E(e.content),z(e.content),_||$(e.id),J(e.tags),M(e.tags),q(e.createdAt),ss(e.output||null),ef([]),ev([]),K(null),Y(null),ee(null),ea(null),ei(null),em(null),B([]),j.current=null}},[f,g,_]),(0,n.useEffect)(()=>{if(!sl){if(sr)eC({variant:"destructive",title:"Error loading test cases",description:"Could not fetch test cases: ".concat(sr.message,".")}),B([]);else if(null==sn?void 0:sn.testCases){let e=sn.testCases.map(e=>{var s;return{...e,contract:null!=(s=e.contract)&&s}});B(s=>JSON.stringify(s)!==JSON.stringify(e)?e:s)}}},[sn,sl,sr,eC]);let sL=(0,n.useCallback)(()=>{sE&&sO()},[sE,sO]);(0,n.useEffect)(()=>{sR&&!eZ&&sO()},[ep,sR,eZ,sO]),(0,n.useEffect)(()=>{sD&&!eJ&&sz()},[H,sD,eJ,sz]);let sU=async()=>{if(!e5)return;let e=await sf({id:e5.id});e.error?eC({variant:"destructive",title:"Error deleting test case",description:e.error.message}):(eC({title:"Test case deleted",description:'The test case "'.concat(e5.name,'" has been successfully deleted.')}),sa({requestPolicy:"network-only"})),e2(!1),e6(null)},s_=async e=>{let s=(W||[]).find(s=>s.id===e);if(!s)return void eC({variant:"destructive",title:"Test Case not found",description:"Could not find test case with ID: ".concat(e)});let t={...s,contract:!s.contract};B(s=>(s||[]).map(s=>s.id===e?t:s));try{let a=(t.expectedConversation||t.messages||[]).map(e=>{let{role:s,content:t}=e;return{role:s,content:t}}),n=await sj({input:{id:t.id,name:t.name,description:t.description,expectedConversation:a,contract:t.contract}});n.error?(B(t=>(t||[]).map(t=>t.id===e?s:t)),eC({variant:"destructive",title:"Error updating test case contract",description:n.error.message})):(eC({title:"Test Case Updated",description:'Contract status for "'.concat(t.name,'" has been updated.')}),(null==eM?void 0:eM.id)===e&&eW(e=>e?{...e,contract:t.contract}:null),(null==eB?void 0:eB.id)===e&&eG(e=>e?{...e,contract:t.contract}:null))}catch(t){B(t=>(t||[]).map(t=>t.id===e?s:t)),eC({variant:"destructive",title:"Error updating test case contract",description:t.message||"An unexpected error occurred."})}},s$=async e=>{if(!_)return void eC({variant:"destructive",title:"Cannot save test case",description:"A UseCase ID is required."});let s=(e.expectedConversation||[]).map(e=>{let{role:s,content:t}=e;return{role:s,content:t}}),t=await sw({input:{useCaseId:_,name:e.name,description:e.description,expectedConversation:s,contract:!1}});t.error?eC({variant:"destructive",title:"Error adding test case",description:t.error.message}):(eC({title:"Test Case Added",description:'"'.concat(e.name,'" has been successfully added.')}),sa({requestPolicy:"network-only"}))},sP=e=>{let s=(W||[]).find(s=>s.id===e);s?(eW(JSON.parse(JSON.stringify(s))),eG(JSON.parse(JSON.stringify(s))),eQ(!0)):eC({variant:"destructive",title:"Test Case not found",description:"Could not find details for test case with ID: ".concat(e)})},sF=async e=>{if(!eB)return;let s={...eB,contract:e};eG(s),e4(!0);try{let t=(s.expectedConversation||s.messages||[]).map(e=>{let{role:s,content:t}=e;return{role:s,content:t}}),a=await sj({input:{id:s.id,name:s.name,description:s.description,expectedConversation:t,contract:e}});a.error?(eG(eB),eC({variant:"destructive",title:"Error updating test case",description:a.error.message})):(B(e=>(e||[]).map(e=>e.id===s.id?s:e)),eW(s),eC({title:"Test Case Updated",description:'Contract status for "'.concat(s.name,'" has been updated.')}))}finally{e4(!1)}},sq=async()=>{if(eB){e4(!0);try{var e;let s=(eB.expectedConversation||eB.messages||[]).map(e=>{let{role:s,content:t}=e;return{role:s,content:t}}),t=await sj({input:{id:eB.id,name:eB.name,description:eB.description,expectedConversation:s,contract:null!=(e=eB.contract)&&e}});t.error?eC({variant:"destructive",title:"Error updating test case",description:t.error.message}):(B(e=>e?e.map(e=>e.id===eB.id?JSON.parse(JSON.stringify(eB)):e):[]),eW(JSON.parse(JSON.stringify(eB))),eX(!1),eC({title:"Test Case Updated",description:'"'.concat(eB.name,'" has been successfully saved.')}))}finally{e4(!1)}}};return f&&S&&!j.current?(0,a.jsxs)("div",{className:"flex min-h-screen w-full flex-col bg-background",children:[(0,a.jsx)(p.default,{}),(0,a.jsxs)("div",{className:"flex flex-1 items-center justify-center",children:[(0,a.jsx)(o.A,{className:"h-8 w-8 animate-spin"}),(0,a.jsx)("p",{className:"ml-4",children:"Loading prompt..."})]})]}):(0,a.jsxs)("div",{className:"flex min-h-screen w-full flex-col bg-background",children:[(0,a.jsx)(p.default,{}),(0,a.jsxs)("main",{className:"flex flex-1 flex-col overflow-hidden px-4 pb-4 md:px-6 md:pb-6",children:[(0,a.jsxs)("div",{className:"flex h-12 shrink-0 items-center justify-between border-b px-2 py-1 mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(r(),{href:"/dashboard",children:(0,a.jsxs)(w.$,{variant:"ghost",size:"icon",children:[(0,a.jsx)(d.A,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"sr-only",children:"Back"})]})}),(0,a.jsx)("span",{id:"prompt-id",className:"p-2 w-72 font-mono text-sm h-9",children:_})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(eE,{tags:H,onTagsChange:J}),(0,a.jsxs)(eO.l6,{value:se||"none",onValueChange:e=>{let s="none"===e?"":e;_&&sC({id:_,output:s}).then(e=>{let{data:t,error:a}=e;a?eC({variant:"destructive",title:"Error updating widget",description:a.message}):(null==t?void 0:t.updateOutput)&&(eC({title:"Widget Updated",description:"The output widget for this prompt has been changed."}),ss(s))})},onOpenChange:e=>{e&&sA({requestPolicy:"network-only"})},disabled:!_||sk.fetching,children:[(0,a.jsx)(eO.bq,{className:"w-[180px]",children:(0,a.jsx)(eO.yv,{placeholder:"Select a widget"})}),(0,a.jsxs)(eO.gC,{children:[(0,a.jsx)(eO.eb,{value:"none",children:"No Widget"}),sT.map(e=>(0,a.jsx)(eO.eb,{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)(w.$,{onClick:()=>e_(!0),size:"sm",variant:"outline",children:[(0,a.jsx)(m.A,{className:"mr-2 h-4 w-4"}),"Chat History"]}),(0,a.jsxs)(w.$,{onClick:()=>{U(T),eq(null),eL(null),eT(!0)},size:"sm",variant:"outline",children:[(0,a.jsx)(u.A,{className:"mr-2 h-4 w-4"}),"Chat"]})]})]}),(0,a.jsxs)(er.HK,{direction:"horizontal",className:"flex-1",children:[(0,a.jsx)(er.wV,{defaultSize:42,className:"relative z-20",children:(0,a.jsxs)(er.HK,{direction:"vertical",children:[(0,a.jsx)(er.wV,{defaultSize:70,minSize:30,children:(0,a.jsx)(N.Zp,{className:"h-full",children:(0,a.jsx)(O,{prompt:T,onPromptChange:E,onSave:sO,isDirty:sI,isSaving:eZ,onBlur:sL,tools:e9})})}),(0,a.jsx)(er.WM,{withHandle:!0}),(0,a.jsx)(er.wV,{defaultSize:30,minSize:20,className:"pt-4",children:(0,a.jsx)(N.Zp,{className:"h-full",children:(0,a.jsx)(ed,{utterances:ep,onRemoveUtterance:e=>{ef((ep||[]).filter((s,t)=>t!==e))},onAddUtterance:e=>{ef(s=>[...s||[],e])},isGenerating:e8,disabled:!_,onPlayUtterance:e=>{U(T),eq(null),eL(e),eT(!0)},onRegenerate:()=>{if(!T)return void eC({variant:"destructive",title:"Cannot generate utterances",description:"Prompt content is required."});e3(!0),eC({title:"Generating example utterances...",description:"AI is creating new examples for you."}),sN({useCase:T}).then(e=>{var s;let{data:t,error:a}=e;if(e3(!1),a)eC({variant:"destructive",title:"Error generating utterances",description:a.message});else if(null==t||null==(s=t.examples)?void 0:s.examples){let e=t.examples.examples;ef(e),eC({title:"Utterances Generated",description:"".concat(e.length," new example utterances were created.")})}})}})})})]})}),(0,a.jsx)(er.WM,{withHandle:!0}),(0,a.jsx)(er.wV,{defaultSize:33,children:(0,a.jsx)(N.Zp,{className:"h-full mx-4",children:(0,a.jsx)(Z,{testCases:W||[],isTesting:eN,onGenerateTestCases:()=>{if(!_)return void eC({variant:"destructive",title:"Cannot generate tests",description:"A UseCase ID is required."});eb(!0),eC({title:"Generating test cases...",description:"AI is creating new test cases for your prompt."}),sc({id:_}).then(e=>{let{data:s,error:t}=e;eb(!1),t?eC({variant:"destructive",title:"Error generating test cases",description:t.message}):(null==s?void 0:s.newTests)&&(eC({title:"Test Cases Generated",description:"".concat(s.newTests.count," new test cases were created.")}),sa({requestPolicy:"network-only"}))})},isGeneratingTests:ew,onPlayTestCase:e=>{if(!_)return void eC({variant:"destructive",title:"Cannot run test",description:"A UseCase ID is required."});ey(!0),eC({title:"Running test: ".concat(e.name),description:"The prompt is being evaluated against the selected test case."}),sh({id:_,testCaseId:e.id}).then(s=>{let{data:t,error:a}=s;if(ey(!1),a)eC({variant:"destructive",title:"Error running test",description:a.message});else if(null==t?void 0:t.executeTests){var n,l;let{overallScore:s,results:a}=t.executeTests;K(null!=s?s:null),em(null!=a?a:[]),Y(null),ee(null),ea(null),ei(null),eC({title:"Test complete!",description:'Score for "'.concat(e.name,'": ').concat((null!=(l=null==a||null==(n=a[0])?void 0:n.score)?l:0).toFixed(0))})}})},onRunTests:()=>{if(!_)return void eC({variant:"destructive",title:"Cannot run tests",description:"A UseCase ID is required."});ey(!0),eC({title:"Running tests...",description:"The prompt is being evaluated against the test cases."}),sh({id:_}).then(e=>{let{data:s,error:t}=e;if(ey(!1),t)eC({variant:"destructive",title:"Error running tests",description:t.message});else if(null==s?void 0:s.executeTests){let{overallScore:e,results:t}=s.executeTests;K(null!=e?e:null),em(null!=t?t:[]),Y(null),ee(null),ea(null),ei(null),eC({title:"Tests complete!",description:"Overall score: ".concat((null!=e?e:0).toFixed(2))})}})},useCaseId:_,onTestCaseSelect:sP,onDeleteTestCase:(e,s)=>{e.stopPropagation();let t=(W||[]).find(e=>e.id===s);t&&(e6({id:t.id,name:t.name}),e2(!0))},onToggleContract:s_})})}),(0,a.jsx)(er.WM,{withHandle:!0}),(0,a.jsx)(er.wV,{defaultSize:25,children:(0,a.jsxs)("div",{className:"h-full flex flex-col gap-4",children:[(0,a.jsx)(N.Zp,{children:(0,a.jsx)(el,{prompt:T,useCaseId:_,onAcceptSuggestion:e=>{E(e),eC({title:"Prompt Updated",description:"The AI suggestion has been applied."})}})}),(0,a.jsx)(N.Zp,{className:"flex-1",children:(0,a.jsx)(es,{accuracy:G,verdict:Q,reasons:X,missingRequirements:et,violations:en,results:ec,onViewTestCase:sP,isTesting:eN})})]})})]})]}),(0,a.jsx)(ej,{isOpen:eA,onOpenChange:e=>{e||(eL(null),eq(null)),eT(e)},useCaseId:eF?eF.useCaseId:_,prompt:eF?eF.prompt:L,utterance:eD,historyItem:eF,onSaveHistory:(e,s,t)=>{let a={...e,id:"chat-".concat(Date.now()),timestamp:new Date().toISOString(),messages:s,prompt:t};eP(e=>[a,...e])},onSaveAsTest:s$}),(0,a.jsx)(eS,{isOpen:eU,onOpenChange:e_,history:e$,onHistoryItemClick:e=>{eL(null),eq(e),e_(!1),setTimeout(()=>{eT(!0)},500)}}),(0,a.jsx)(ex.cj,{open:eK,onOpenChange:e=>{eQ(e),e||(eW(null),eG(null),eX(!1))},children:(0,a.jsx)(ex.h,{className:"w-full sm:max-w-xl flex flex-col",children:eB&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ex.Fm,{children:(0,a.jsx)("div",{className:"space-y-1.5",children:eY?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eo.p,{value:eB.name,onChange:e=>eG(s=>s?{...s,name:e.target.value}:null),className:"text-lg font-semibold h-auto p-0 border-0 shadow-none focus-visible:ring-0",placeholder:"Test Case Name"}),(0,a.jsx)(y.T,{value:eB.description,onChange:e=>eG(s=>s?{...s,description:e.target.value}:null),className:"text-sm text-muted-foreground p-0 border-0 shadow-none focus-visible:ring-0 resize-none",placeholder:"Test Case Description",rows:2})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ex.qp,{children:eB.name}),(0,a.jsx)(ex.Qs,{children:eB.description})]})})}),(0,a.jsxs)("div",{className:"border-y py-4 my-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-1",children:[(0,a.jsx)(eu.J,{htmlFor:"contract-switch",className:"font-semibold",children:"Contract Test"}),(0,a.jsx)(eI,{id:"contract-switch",checked:null!=(s=eB.contract)&&s,onCheckedChange:sF,disabled:e0})]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground px-1 pt-1",children:"If enabled, the Test will be used at runtime to improve reliability."})]}),(0,a.jsx)(F.F,{className:"flex-1 pr-4 -mr-4",children:(0,a.jsx)("div",{className:"space-y-6 pr-4",children:(eB.messages||eB.expectedConversation)&&(eB.messages||eB.expectedConversation).length>0?(eB.messages||eB.expectedConversation).map((e,s)=>(0,a.jsx)(eh.A,{message:e,isEditing:eY,onContentChange:e=>{eG(t=>{if(!t)return null;let a=t.expectedConversation||t.messages||[];if(!a)return t;let n=[...a];return n[s]={...n[s],content:e},{...t,expectedConversation:n}})},onRoleChange:e=>{eG(t=>{if(!t)return null;let a=t.expectedConversation||t.messages||[];if(!a)return t;let n=[...a];return n[s]={...n[s],role:e},{...t,expectedConversation:n}})},onRemove:()=>{eG(e=>{if(!e)return null;let t=e.expectedConversation||e.messages||[];if(!t)return e;let a=t.filter((e,t)=>t!==s);return{...e,expectedConversation:a}})}},s)):(0,a.jsxs)("div",{className:"text-sm text-muted-foreground text-center pt-8",children:["No conversation details available for this test case.",eY&&" Add a message to get started."]})})}),(0,a.jsxs)("div",{className:"border-t pt-4 mt-auto space-y-4",children:[eY&&(0,a.jsxs)(w.$,{onClick:()=>{eG(e=>{if(!e)return null;let s=[...e.expectedConversation||e.messages||[],{role:"user",content:"",format:"text"}];return{...e,expectedConversation:s}})},className:"w-full",variant:"outline",children:[(0,a.jsx)(x.A,{className:"mr-2 h-4 w-4"})," Add Message"]}),(0,a.jsx)("div",{className:"flex justify-end gap-2",children:eY?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(w.$,{variant:"outline",onClick:()=>{eM&&eG(JSON.parse(JSON.stringify(eM))),eX(!1)},children:"Cancel"}),(0,a.jsxs)(w.$,{onClick:sq,disabled:e0,children:[e0&&(0,a.jsx)(o.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Save"]})]}):(0,a.jsxs)(w.$,{variant:"outline",onClick:()=>eX(!0),children:[(0,a.jsx)(h.A,{className:"mr-2 h-4 w-4"}),"Edit"]})})]})]})})}),(0,a.jsx)(eR.Lt,{open:e1,onOpenChange:e=>{e||e6(null),e2(e)},children:(0,a.jsxs)(eR.EO,{children:[(0,a.jsxs)(eR.wd,{children:[(0,a.jsx)(eR.r7,{children:"Are you sure?"}),(0,a.jsxs)(eR.$v,{children:['This action cannot be undone. This will permanently delete the test case "',null==e5?void 0:e5.name,'".']})]}),(0,a.jsxs)(eR.ck,{children:[(0,a.jsx)(eR.Zr,{children:"Cancel"}),(0,a.jsx)(eR.Rx,{onClick:sU,children:"Delete"})]})]})})]})}function eU(){return(0,a.jsx)(n.Suspense,{fallback:(0,a.jsxs)("div",{className:"flex min-h-screen w-full flex-col items-center justify-center bg-background",children:[(0,a.jsx)(o.A,{className:"h-8 w-8 animate-spin text-primary"}),(0,a.jsx)("p",{className:"mt-4 text-muted-foreground",children:"Loading..."})]}),children:(0,a.jsx)(eL,{})})}},1834:(e,s,t)=>{"use strict";t.d(s,{Cf:()=>m,Es:()=>x,L3:()=>h,c7:()=>u,lG:()=>c,rr:()=>p});var a=t(5155),n=t(2115),l=t(7283),r=t(6615),i=t(4269);let c=l.bL;l.l9;let o=l.ZL;l.bm;let d=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(l.hJ,{ref:s,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...n})});d.displayName=l.hJ.displayName;let m=n.forwardRef((e,s)=>{let{className:t,children:n,...c}=e;return(0,a.jsxs)(o,{children:[(0,a.jsx)(d,{}),(0,a.jsxs)(l.UC,{ref:s,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...c,children:[n,(0,a.jsxs)(l.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(r.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=l.UC.displayName;let u=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...t})};u.displayName="DialogHeader";let x=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t})};x.displayName="DialogFooter";let h=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(l.hE,{ref:s,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",t),...n})});h.displayName=l.hE.displayName;let p=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(l.VY,{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",t),...n})});p.displayName=l.VY.displayName},3556:(e,s,t)=>{Promise.resolve().then(t.bind(t,560))},6789:(e,s,t)=>{"use strict";t.d(s,{HK:()=>c,WM:()=>d,wV:()=>o});var a=t(5155),n=t(2115),l=t(6146),r=t(6745),i=t(4269);let c=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(r.YZ,{ref:s,className:(0,i.cn)("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",t),...n})});c.displayName="ResizablePanelGroup";let o=r.Zk,d=n.forwardRef((e,s)=>{let{className:t,withHandle:n,...c}=e;return(0,a.jsx)(r.TW,{ref:s,className:(0,i.cn)("relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90",t),...c,children:n&&(0,a.jsx)("div",{className:"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border",children:(0,a.jsx)(l.A,{className:"h-2.5 w-2.5"})})})});d.displayName="ResizableHandle"},6948:(e,s,t)=>{"use strict";t.d(s,{BT:()=>o,Wu:()=>d,ZB:()=>c,Zp:()=>r,aR:()=>i});var a=t(5155),n=t(2115),l=t(4269);let r=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-lg dark:shadow-sm",t),...n})});r.displayName="Card";let i=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",t),...n})});i.displayName="CardHeader";let c=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",t),...n})});c.displayName="CardTitle";let o=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)("text-sm text-muted-foreground",t),...n})});o.displayName="CardDescription";let d=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)("p-6 pt-0",t),...n})});d.displayName="CardContent",n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)("flex items-center p-6 pt-0",t),...n})}).displayName="CardFooter"},8053:(e,s,t)=>{"use strict";t.d(s,{$v:()=>p,EO:()=>m,Lt:()=>c,Rx:()=>f,Zr:()=>g,ck:()=>x,r7:()=>h,wd:()=>u});var a=t(5155),n=t(2115),l=t(6463),r=t(4269),i=t(3998);let c=l.bL;l.l9;let o=l.ZL,d=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(l.hJ,{className:(0,r.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...n,ref:s})});d.displayName=l.hJ.displayName;let m=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsxs)(o,{children:[(0,a.jsx)(d,{}),(0,a.jsx)(l.UC,{ref:s,className:(0,r.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n})]})});m.displayName=l.UC.displayName;let u=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,r.cn)("flex flex-col space-y-2 text-center sm:text-left",s),...t})};u.displayName="AlertDialogHeader";let x=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,r.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t})};x.displayName="AlertDialogFooter";let h=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(l.hE,{ref:s,className:(0,r.cn)("text-lg font-semibold",t),...n})});h.displayName=l.hE.displayName;let p=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(l.VY,{ref:s,className:(0,r.cn)("text-sm text-muted-foreground",t),...n})});p.displayName=l.VY.displayName;let f=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(l.rc,{ref:s,className:(0,r.cn)((0,i.r)(),t),...n})});f.displayName=l.rc.displayName;let g=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(l.ZD,{ref:s,className:(0,r.cn)((0,i.r)({variant:"outline"}),"mt-2 sm:mt-0",t),...n})});g.displayName=l.ZD.displayName}},e=>{e.O(0,[310,330,150,463,583,34,654,391,878,959,441,255,358],()=>e(e.s=3556)),_N_E=e.O()}]);