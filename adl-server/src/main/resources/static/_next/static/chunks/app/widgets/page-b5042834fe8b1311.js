(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[392],{625:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>y});var a=t(5155),l=t(2115),r=t(2619),d=t.n(r),n=t(878),i=t(6948),c=t(3998),o=t(2265),m=t(2033),x=t(8770),f=t(4640),h=t(3630),u=t(2044),p=t(3262),j=t(8086),N=t(8332),g=t(5894),w=t(8053);function y(){let[e,s]=(0,u.IT)({query:p.s_,requestPolicy:"cache-and-network"}),{data:t,fetching:r,error:y}=e,[v,b]=(0,l.useState)(!1),[k,C]=(0,l.useState)(null),{toast:R}=(0,g.dj)(),[A,E]=(0,u.n_)(j.dk),T=(null==t?void 0:t.widgets)||[],D=async()=>{if(!k)return;let e=await E({id:k.id});e.error?R({variant:"destructive",title:"Error deleting widget",description:e.error.message}):(R({title:"Widget deleted",description:'The widget "'.concat(k.name,'" has been successfully deleted.')}),s({requestPolicy:"network-only"})),b(!1),C(null)};return(0,a.jsxs)("div",{className:"flex min-h-screen w-full flex-col bg-background",children:[(0,a.jsx)(n.default,{}),(0,a.jsxs)("main",{className:"flex flex-1 flex-col px-4 pb-4 md:px-6 md:pb-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between my-6",children:[(0,a.jsxs)("div",{className:"my-6 px-4",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Widgets"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Widgets can be used to decorate Agent responses with HTML templates."})]}),(0,a.jsx)(d(),{href:"/faces",children:(0,a.jsxs)(c.$,{children:[(0,a.jsx)(o.A,{className:"mr-2 h-4 w-4"}),"New Widget"]})})]}),(0,a.jsx)("div",{className:"flex-1 rounded-lg bg-muted/50 p-6",children:r?(0,a.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,a.jsx)(m.A,{className:"h-8 w-8 animate-spin"})}):y?(0,a.jsxs)(N.Fc,{variant:"destructive",children:[(0,a.jsx)(x.A,{className:"h-4 w-4"}),(0,a.jsx)(N.XL,{children:"Error"}),(0,a.jsxs)(N.TN,{children:["Failed to load widgets: ",y.message]})]}):T.length>0?(0,a.jsx)("div",{className:"flex flex-wrap gap-4",children:T.map(e=>{let s;return(0,a.jsx)("div",{className:"w-full sm:max-w-[300px]",children:(0,a.jsxs)(i.Zp,{children:[(0,a.jsxs)(i.aR,{className:"flex flex-row justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex-grow",children:[(0,a.jsx)(i.ZB,{children:e.name}),e.description&&(0,a.jsx)(i.BT,{children:e.description})]}),(0,a.jsxs)("div",{className:"flex -mr-4",children:[(0,a.jsx)(d(),{href:"/faces?id=".concat(e.id),children:(0,a.jsxs)(c.$,{variant:"ghost",size:"icon",children:[(0,a.jsx)(f.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Edit Widget"})]})}),(0,a.jsxs)(c.$,{variant:"ghost",size:"icon",onClick:s=>{s.stopPropagation(),C(e),b(!0)},children:[(0,a.jsx)(h.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Delete Widget"})]})]})]}),e.html&&(0,a.jsx)(i.Wu,{className:"h-48 bg-muted/50 rounded-b-lg overflow-hidden",children:(0,a.jsx)("iframe",{srcDoc:(s=e.html,'\n      <!DOCTYPE html>\n      <html>\n        <head>\n          <script src="https://cdn.tailwindcss.com"><\/script>\n          <style>\n            body { \n              background-color: transparent;\n              height: 100%;\n              width: 100%;\n              display: flex;\n              justify-content: center;\n              align-items: center;\n              overflow: hidden;\n            }\n          </style>\n        </head>\n        <body>\n          '.concat(s,"\n        </body>\n      </html>\n    ")),title:"".concat(e.name," preview"),className:"w-full h-full border-0 pointer-events-none",sandbox:"allow-scripts"})})]})},e.id)})}):(0,a.jsx)("div",{className:"flex h-full items-center justify-center text-center text-sm text-muted-foreground",children:"No widgets found."})})]}),(0,a.jsx)(w.Lt,{open:v,onOpenChange:e=>{e||C(null),b(e)},children:(0,a.jsxs)(w.EO,{children:[(0,a.jsxs)(w.wd,{children:[(0,a.jsx)(w.r7,{children:"Are you sure?"}),(0,a.jsxs)(w.$v,{children:['This action cannot be undone. This will permanently delete the widget "',null==k?void 0:k.name,'".']})]}),(0,a.jsxs)(w.ck,{children:[(0,a.jsx)(w.Zr,{children:"Cancel"}),(0,a.jsxs)(w.Rx,{onClick:D,disabled:A.fetching,children:[A.fetching&&(0,a.jsx)(m.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Delete"]})]})]})})]})}},4640:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(4294).A)("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},6948:(e,s,t)=>{"use strict";t.d(s,{BT:()=>c,Wu:()=>o,ZB:()=>i,Zp:()=>d,aR:()=>n});var a=t(5155),l=t(2115),r=t(4269);let d=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-lg dark:shadow-sm",t),...l})});d.displayName="Card";let n=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",t),...l})});n.displayName="CardHeader";let i=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",t),...l})});i.displayName="CardTitle";let c=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,r.cn)("text-sm text-muted-foreground",t),...l})});c.displayName="CardDescription";let o=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,r.cn)("p-6 pt-0",t),...l})});o.displayName="CardContent",l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,r.cn)("flex items-center p-6 pt-0",t),...l})}).displayName="CardFooter"},7210:(e,s,t)=>{Promise.resolve().then(t.bind(t,625))},8053:(e,s,t)=>{"use strict";t.d(s,{$v:()=>u,EO:()=>m,Lt:()=>i,Rx:()=>p,Zr:()=>j,ck:()=>f,r7:()=>h,wd:()=>x});var a=t(5155),l=t(2115),r=t(6463),d=t(4269),n=t(3998);let i=r.bL;r.l9;let c=r.ZL,o=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(r.hJ,{className:(0,d.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...l,ref:s})});o.displayName=r.hJ.displayName;let m=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsxs)(c,{children:[(0,a.jsx)(o,{}),(0,a.jsx)(r.UC,{ref:s,className:(0,d.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...l})]})});m.displayName=r.UC.displayName;let x=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,d.cn)("flex flex-col space-y-2 text-center sm:text-left",s),...t})};x.displayName="AlertDialogHeader";let f=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,d.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t})};f.displayName="AlertDialogFooter";let h=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(r.hE,{ref:s,className:(0,d.cn)("text-lg font-semibold",t),...l})});h.displayName=r.hE.displayName;let u=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(r.VY,{ref:s,className:(0,d.cn)("text-sm text-muted-foreground",t),...l})});u.displayName=r.VY.displayName;let p=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(r.rc,{ref:s,className:(0,d.cn)((0,n.r)(),t),...l})});p.displayName=r.rc.displayName;let j=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(r.ZD,{ref:s,className:(0,d.cn)((0,n.r)({variant:"outline"}),"mt-2 sm:mt-0",t),...l})});j.displayName=r.ZD.displayName}},e=>{e.O(0,[330,150,463,878,441,255,358],()=>e(e.s=7210)),_N_E=e.O()}]);