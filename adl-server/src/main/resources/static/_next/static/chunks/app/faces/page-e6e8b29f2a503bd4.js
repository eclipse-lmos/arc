(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[435],{16789:(e,t,a)=>{"use strict";a.d(t,{HK:()=>d,WM:()=>o,wV:()=>c});var r=a(95155),s=a(12115),l=a(16146),i=a(56745),n=a(64269);let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(i.YZ,{ref:t,className:(0,n.cn)("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",a),...s})});d.displayName="ResizablePanelGroup";let c=i.Zk,o=s.forwardRef((e,t)=>{let{className:a,withHandle:s,...d}=e;return(0,r.jsx)(i.TW,{ref:t,className:(0,n.cn)("relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90",a),...d,children:s&&(0,r.jsx)("div",{className:"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border",children:(0,r.jsx)(l.A,{className:"h-2.5 w-2.5"})})})});o.displayName="ResizableHandle"},20063:(e,t,a)=>{"use strict";var r=a(47260);a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(t,{useSearchParams:function(){return r.useSearchParams}})},29415:(e,t,a)=>{Promise.resolve().then(a.bind(a,46023))},31120:(e,t,a)=>{"use strict";a.d(t,{T:()=>i});var r=a(95155),s=a(12115),l=a(64269);let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...s})});i.displayName="Textarea"},46023:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>y});var r=a(95155),s=a(12115),l=a(20063),i=a(40878),n=a(16789),d=a(86948),c=a(3998),o=a(65142),u=a(76444),f=a(31120),h=a(62044),p=a(15894),m=a(68086),x=a(23262),g=a(92033),v=a(73180),j=a(13496);let w={highlight:e=>e.split(/(<[^>]+>)/g).map((e,t)=>{if(!e)return null;if(e.startsWith("<")&&e.endsWith(">")){let a=e.slice(1,-1).split(/([\w\-\:]+="[^"]*")/g);return(0,r.jsxs)("span",{className:"text-gray-500",children:["<",a.map((e,t)=>{if(0===t){let a=e.match(/^\/?[\w\-\:]+/);if(a){let s=a[0],l=e.substring(s.length);return(0,r.jsxs)("span",{children:[(0,r.jsx)("span",{className:"text-blue-400",children:s}),l]},t)}return(0,r.jsx)("span",{children:e},t)}if(/[\w\-\:]+="[^"]*"/.test(e)){let[a,s]=e.split("=",2);return(0,r.jsxs)("span",{children:[(0,r.jsx)("span",{className:"text-yellow-500",children:a}),(0,r.jsx)("span",{className:"text-gray-500",children:"="}),(0,r.jsx)("span",{className:"text-green-500",children:s})]},t)}return(0,r.jsx)("span",{children:e},t)}),">"]},t)}return(0,r.jsx)("span",{children:e},t)})};function b(e){let{html:t,onHtmlChange:a}=e,l=(0,s.useRef)(null),i=(0,s.useRef)(null),n=(0,s.useMemo)(()=>{let e=t.split("\n");return e.map((t,a)=>{let l=w.highlight(t);return(0,r.jsxs)(s.Fragment,{children:[l,a<e.length-1?"\n":""]},a)})},[t]);return(0,r.jsxs)("div",{className:"relative h-full",children:[(0,r.jsxs)("div",{ref:l,className:"absolute inset-0 z-10 px-3 py-2 font-mono text-sm rounded-lg whitespace-pre-wrap pointer-events-none overflow-auto no-scrollbar","aria-hidden":"true",children:[n," "]}),(0,r.jsx)(f.T,{ref:i,value:t,onChange:e=>{a(e.target.value)},onScroll:()=>{l.current&&i.current&&(l.current.scrollTop=i.current.scrollTop,l.current.scrollLeft=i.current.scrollLeft)},placeholder:"Enter your HTML here...",className:"relative w-full h-full resize-none font-mono text-sm rounded-lg bg-transparent text-transparent caret-foreground p-0 border-0 focus-visible:ring-0 focus-visible:ring-offset-0 px-3 py-2",spellCheck:"false"})]})}function N(){let e=(0,l.useSearchParams)(),t=(0,l.useRouter)(),a=e.get("id"),[w,N]=(0,s.useState)(""),[y,A]=(0,s.useState)(""),[S,C]=(0,s.useState)(""),[R,W]=(0,s.useState)(""),[k,T]=(0,s.useState)(""),[H,z]=(0,s.useState)(a),{toast:P}=(0,p.dj)(),[E,V]=(0,h.n_)(m.rr),[M,_]=(0,h.n_)(m.x3),[O]=(0,h.IT)({query:x.zH,variables:{id:a},pause:!a});(0,s.useEffect)(()=>{var e;if(null==(e=O.data)?void 0:e.widget){let{name:e,html:t,jsonSchema:a}=O.data.widget;W(e),N(t),A(a||"")}else O.error&&P({variant:"destructive",title:"Error loading widget",description:O.error.message})},[O.data,O.error,P]),(0,s.useEffect)(()=>{if(a)return;let t=e.get("name"),r=e.get("purpose"),s=e.get("interactions");t&&W(t),r&&C(r),s&&T(s)},[e,a]);let Z=async e=>{var t,a;if(e.preventDefault(),!S.trim())return void P({variant:"destructive",title:"Purpose is empty",description:"Please describe the widget you want to generate."});let r=R||S.toLowerCase().split(" ").slice(0,3).join("-").replace(/[^a-z0-9-]/g,""),s=await V({name:r,purpose:S,interactions:k||"no interactions"});s.error?P({variant:"destructive",title:"Error generating widget",description:s.error.message}):(null==(a=s.data)||null==(t=a.generateWidget)?void 0:t.html)&&(N(s.data.generateWidget.html),A(s.data.generateWidget.jsonSchema||""),P({title:"Widget Generated",description:"The new widget has been generated and is ready for preview."}))},D=async()=>{var e;if(!w)return void P({variant:"destructive",title:"Nothing to save",description:"Please generate or write some HTML first."});if(!R)return void P({variant:"destructive",title:"Widget name is required",description:"Please provide a name for the widget."});let a=await _({id:H,name:R,html:w,jsonSchema:y,preview:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="});if(a.error)P({variant:"destructive",title:"Error saving widget",description:a.error.message});else if((null==(e=a.data)?void 0:e.saveWidget)&&(P({title:"Widget Saved",description:'The widget "'.concat(a.data.saveWidget.name,'" has been saved.')}),!H)){let e=a.data.saveWidget.id;z(e),t.push("/faces?id=".concat(e),{scroll:!1})}},L='\n      <!DOCTYPE html>\n      <html lang="en">\n        <head>\n          <script src="https://cdn.tailwindcss.com"><\/script>\n          <style>\n            body { \n              background-color: transparent;\n              height: 100vh;\n              display: flex;\n              justify-content: center;\n              align-items: center;\n              padding: 1rem;\n            }\n          </style>\n        </head>\n        <body>\n          '.concat(w,"\n        </body>\n      </html>\n    ");return(0,r.jsxs)("div",{className:"flex min-h-screen w-full flex-col bg-background",children:[(0,r.jsx)(i.default,{}),(0,r.jsxs)("main",{className:"flex flex-1 flex-col overflow-hidden",children:[(0,r.jsx)(j.nD,{type:"single",collapsible:!0,defaultValue:"item-1",className:"border-b",children:(0,r.jsxs)(j.As,{value:"item-1",className:"border-b-0",children:[(0,r.jsx)(j.$m,{className:"px-4 py-3 text-lg font-semibold hover:no-underline",children:"Generate Widget"}),(0,r.jsx)(j.ub,{className:"p-4 pt-0",children:(0,r.jsxs)("form",{onSubmit:Z,className:"w-full max-w-4xl mx-auto space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(u.J,{htmlFor:"widget-name",children:"Name"}),(0,r.jsx)(o.p,{id:"widget-name",placeholder:"e.g. weather-widget",value:R,onChange:e=>W(e.target.value),disabled:E.fetching})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(u.J,{htmlFor:"widget-interactions",children:"Interactions"}),(0,r.jsx)(o.p,{id:"widget-interactions",placeholder:"e.g. button clicks, form submissions",value:k,onChange:e=>T(e.target.value),disabled:E.fetching})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(u.J,{htmlFor:"widget-purpose",children:"Purpose"}),(0,r.jsx)(f.T,{id:"widget-purpose",placeholder:"Describe a widget you want to see...",value:S,onChange:e=>C(e.target.value),disabled:E.fetching})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,r.jsxs)(c.$,{type:"button",variant:"outline",onClick:D,disabled:!w||M.fetching,children:[M.fetching?(0,r.jsx)(g.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,r.jsx)(v.A,{className:"mr-2 h-4 w-4"}),"Save"]}),(0,r.jsx)(c.$,{type:"submit",disabled:E.fetching||!S.trim(),children:E.fetching?(0,r.jsx)(g.A,{className:"animate-spin"}):"Generate"})]})]})})]})}),(0,r.jsxs)(n.HK,{direction:"horizontal",className:"flex-1",children:[(0,r.jsx)(n.wV,{defaultSize:50,children:(0,r.jsxs)("div",{className:"flex flex-col h-full p-4 gap-4",children:[(0,r.jsx)("h2",{className:"text-xl font-bold",children:"Preview"}),(0,r.jsx)(d.Zp,{className:"flex-1 overflow-hidden bg-muted",children:(0,r.jsx)(d.Wu,{className:"p-0 h-full w-full",children:O.fetching?(0,r.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,r.jsx)(g.A,{className:"h-8 w-8 animate-spin"})}):(0,r.jsx)("iframe",{srcDoc:L,title:"Widget Preview",className:"w-full h-full border-0",sandbox:"allow-scripts"})})})]})}),(0,r.jsx)(n.WM,{withHandle:!0}),(0,r.jsx)(n.wV,{defaultSize:50,children:(0,r.jsxs)(n.HK,{direction:"vertical",children:[(0,r.jsx)(n.wV,{defaultSize:50,children:(0,r.jsxs)("div",{className:"flex flex-col h-full p-4 gap-4",children:[(0,r.jsx)("h2",{className:"text-xl font-bold",children:"HTML"}),(0,r.jsx)(d.Zp,{className:"flex-1",children:(0,r.jsx)(d.Wu,{className:"h-full p-0",children:(0,r.jsx)(b,{html:w,onHtmlChange:N})})})]})}),(0,r.jsx)(n.WM,{withHandle:!0}),(0,r.jsx)(n.wV,{defaultSize:50,children:(0,r.jsxs)("div",{className:"flex flex-col h-full p-4 gap-4",children:[(0,r.jsx)("h2",{className:"text-xl font-bold",children:"JSON Schema"}),(0,r.jsx)(d.Zp,{className:"flex-1",children:(0,r.jsx)(d.Wu,{className:"h-full p-0",children:(0,r.jsx)(f.T,{value:y,readOnly:!0,className:"h-full w-full resize-none rounded-lg bg-muted p-4 text-sm font-mono border-0 focus-visible:ring-0 focus-visible:ring-offset-0"})})})]})})]})})]})]})]})}function y(){return(0,r.jsx)(s.Suspense,{fallback:(0,r.jsx)("div",{className:"flex h-screen w-full items-center justify-center",children:(0,r.jsx)(g.A,{className:"h-4 w-4 animate-spin"})}),children:(0,r.jsx)(N,{})})}},73180:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(14294).A)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},86948:(e,t,a)=>{"use strict";a.d(t,{BT:()=>c,Wu:()=>o,ZB:()=>d,Zp:()=>i,aR:()=>n});var r=a(95155),s=a(12115),l=a(64269);let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-lg dark:shadow-sm",a),...s})});i.displayName="Card";let n=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",a),...s})});n.displayName="CardHeader";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",a),...s})});d.displayName="CardTitle";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",a),...s})});c.displayName="CardDescription";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",a),...s})});o.displayName="CardContent",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",a),...s})}).displayName="CardFooter"}},e=>{e.O(0,[330,150,394,878,441,255,358],()=>e(e.s=29415)),_N_E=e.O()}]);