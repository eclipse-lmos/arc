(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[125],{15894:(e,t,n)=>{"use strict";n.d(t,{dj:()=>u});var s=n(12115);let r=0,a=new Map,i=e=>{if(a.has(e))return;let t=setTimeout(()=>{a.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);a.set(e,t)},l=[],o={toasts:[]};function d(e){o=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:n}=t;return n?i(n):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===n||void 0===n?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(o,e),l.forEach(e=>{e(o)})}function c(e){let{...t}=e,n=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>d({type:"DISMISS_TOAST",toastId:n});return d({type:"ADD_TOAST",toast:{...t,id:n,open:!0,onOpenChange:e=>{e||s()}}}),{id:n,dismiss:s,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:n}})}}function u(){let[e,t]=s.useState(o);return s.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:c,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},23262:(e,t,n)=>{"use strict";n.d(t,{BZ:()=>o,Cn:()=>s,PW:()=>a,XF:()=>m,_i:()=>l,g3:()=>r,qS:()=>i,s_:()=>d,sz:()=>u,zH:()=>c});let s="\n  query TestsQuery($useCaseId: String!) {\n    testCases(useCaseId: $useCaseId) {\n      description\n      expectedConversation {\n        content\n        role\n      }\n      id\n      name\n      useCaseId\n      contract\n    }\n  }\n",r="\n  query ListPrompts($term: String!) {\n    list(searchTerm: { term: $term, limit: 50, threshold: 0.5 }) {\n      id\n      createdAt\n      tags\n      relevance\n    }\n  }\n",a="\n  query SearchByIdQuery($id: String!) {\n    searchById(id: $id) {\n      id\n      createdAt\n      tags\n      content\n      examples\n      output\n    }\n  }\n",i="\n  query getMcpTools {\n    getMcpTools {\n      description\n      name\n      parameters\n    }\n  }\n",l="\n    query getMcpServerUrls {\n        mcpServerUrls {\n            url\n            reachable\n            toolCount \n       }\n    }\n",o="\n  query GetUserSettings {\n    userSettings {\n      apiKey\n      modelName\n      modelUrl\n    }\n  }\n",d="\n  query ListWidgets {\n    widgets {\n      id\n      name\n      description\n      html\n    }\n  }\n",c="\n  query GetWidget($id: String!) {\n    widget(id: $id) {\n      id\n      name\n      html\n      jsonSchema\n    }\n  }\n",u="\n  query RolePrompts {\n    rolePrompts {\n      id\n      name\n      tags\n      role\n      tone\n    }\n  }\n",m="\n  query Dashboard {\n    dashboard {\n      numberOfAdls\n      averageResponseTime\n      mostUsedUseCase {\n        useCaseId\n        count\n        minComplianceScore\n        maxComplianceScore\n      }\n    }\n  }\n"},50085:(e,t,n)=>{Promise.resolve().then(n.bind(n,57532))},57532:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>P});var s=n(95155),r=n(12115),a=n(62044),i=n(5418),l=n(92033),o=n(94979),d=n(70405),c=n(3998),u=n(65142),m=n(17037),p=n(47614),x=n(23262),h=n(68086),g=n(15894),f=n(11186),v=n(16789),j=n(86948),S=n(90576),b=n(66710),$=n(26615),N=n(90925);class y{static getInstance(){return y.instance||(y.instance=new y),y.instance}subscribe(e){this.subscribers.push(e)}unsubscribe(e){this.subscribers=this.subscribers.filter(t=>t!==e)}constructor(){this.eventSource=null,this.subscribers=[],this.eventSource=new N.EventSourcePolyfill("http://localhost:8080/events"),this.eventSource.onmessage=e=>{if(console.log("Received event:",e.data),"heartbeat"!==e.data)try{let t=JSON.parse(e.data);this.subscribers.forEach(e=>e(t))}catch(e){console.log("Error on event:",e)}},this.eventSource.onerror=e=>{this.eventSource&&this.eventSource.close()}}}let T=y.getInstance();var C=n(13496);function w(e){let{event:t}=e;return(0,s.jsxs)(j.Zp,{className:"font-mono text-xs",children:[(0,s.jsx)(j.aR,{className:"p-2",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(i.A,{className:"h-4 w-4"}),(0,s.jsx)(j.ZB,{className:"text-sm font-semibold",children:t.event})]})}),(0,s.jsxs)(j.Wu,{className:"p-2 space-y-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Model:"})," ",t.model]}),(0,s.jsx)(C.nD,{type:"single",collapsible:!0,className:"w-full text-xs",children:(0,s.jsxs)(C.As,{value:"item-1",className:"border-b-0",children:[(0,s.jsx)(C.$m,{className:"p-0 hover:no-underline font-normal",children:(0,s.jsx)("strong",{children:"Result:"})}),(0,s.jsx)(C.ub,{className:"pt-2",children:(0,s.jsx)("pre",{className:"p-2 bg-muted rounded whitespace-pre-wrap",children:(0,s.jsx)("code",{children:t.result})})})]})}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsxs)("span",{children:[(0,s.jsx)("strong",{children:"Total Tokens:"})," ",t.totalTokens]}),(0,s.jsxs)("span",{children:[(0,s.jsx)("strong",{children:"Prompt:"})," ",t.promptTokens]}),(0,s.jsxs)("span",{children:[(0,s.jsx)("strong",{children:"Completion:"})," ",t.completionTokens]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Tool Calls:"})," ",t.toolCallCount]})]})]})}var A=n(26991),I=n(86790),k=n(68425),E=n(47734),R=n(73697),_=n(23508),U=n(7620),q=n(47643);function O(e){let{events:t}=e,n=t.map((e,t)=>({name:"E".concat(t+1),total:e.totalTokens,prompt:e.promptTokens,completion:e.completionTokens})).reverse();return(0,s.jsxs)(j.Zp,{children:[(0,s.jsx)(j.aR,{className:"p-4",children:(0,s.jsx)(j.ZB,{className:"text-base",children:"Token Usage"})}),(0,s.jsx)(j.Wu,{className:"p-0",children:(0,s.jsx)(A.u,{width:"100%",height:150,children:(0,s.jsxs)(I.b,{data:n,margin:{top:5,right:20,left:-10,bottom:5},children:[(0,s.jsx)(k.d,{strokeDasharray:"3 3"}),(0,s.jsx)(E.W,{dataKey:"name"}),(0,s.jsx)(R.h,{}),(0,s.jsx)(_.m,{}),(0,s.jsx)(U.s,{}),(0,s.jsx)(q.N,{type:"monotone",dataKey:"total",stroke:"#8884d8",name:"Total"}),(0,s.jsx)(q.N,{type:"monotone",dataKey:"prompt",stroke:"#82ca9d",name:"Prompt"}),(0,s.jsx)(q.N,{type:"monotone",dataKey:"completion",stroke:"#ffc658",name:"Completion"})]})})})]})}function D(){let[e,t]=(0,r.useState)([]),[n,a]=(0,r.useState)(!1),i=(0,r.useRef)(null);(0,r.useEffect)(()=>{let e=e=>{t(t=>[e,...t].slice(0,100))};return T.subscribe(e),()=>{T.unsubscribe(e)}},[]),(0,r.useEffect)(()=>{if(i.current){let e=i.current.querySelector("div[data-radix-scroll-area-viewport]");e&&(e.scrollTop=0)}},[e]);let l=e.filter(e=>"LLMFinishedEvent"===e.event);return(0,s.jsxs)(j.Zp,{className:"h-full flex flex-col light:bg-transparent light:border-0",children:[(0,s.jsxs)(j.aR,{className:"p-4 flex flex-row items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(S.A,{className:"h-4 w-4 text-primary"}),(0,s.jsx)(j.ZB,{className:"text-base font-semibold",children:"Agent Events"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)(c.$,{variant:"ghost",size:"icon",onClick:()=>a(!n),className:"h-6 w-6",children:[(0,s.jsx)(b.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Toggle graph"})]}),(0,s.jsxs)(c.$,{variant:"ghost",size:"icon",onClick:()=>{t([])},className:"h-6 w-6",children:[(0,s.jsx)($.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Clear events"})]})]})]}),(0,s.jsx)(j.Wu,{className:"flex-1 overflow-hidden p-0",children:n?(0,s.jsx)("div",{className:"p-4",children:(0,s.jsx)(O,{events:l})}):(0,s.jsx)(m.F,{className:"h-full",ref:i,children:(0,s.jsx)("div",{className:"p-4 text-sm",children:0===e.length?(0,s.jsx)("p",{className:"text-muted-foreground text-center pt-8",children:"Waiting for events..."}):(0,s.jsx)("ul",{className:"space-y-2",children:e.map((e,t)=>(0,s.jsx)("li",{children:"LLMFinishedEvent"===e.event?(0,s.jsx)(w,{event:e}):(0,s.jsx)("div",{className:"font-mono bg-muted/50 p-2 rounded-lg text-xs border",children:(0,s.jsx)("pre",{children:(0,s.jsx)("code",{children:JSON.stringify(e,null,2)})})})},t))})})})})]})}let M=e=>{let{selectedRole:t,onRoleChange:n,roles:r,messages:a,isThinking:d,scrollAreaRef:x,onFormSubmit:h,input:g,onInputChange:v,selectedPrompt:j}=e;return(0,s.jsxs)("div",{className:"flex h-full flex-col overflow-hidden",children:[(0,s.jsx)("div",{className:"border-b p-4 light:bg-white",children:(0,s.jsxs)(f.l6,{onValueChange:e=>n("none"===e?null:e),value:t||"none",children:[(0,s.jsx)(f.bq,{className:"w-full max-w-sm mx-auto",children:(0,s.jsx)(f.yv,{placeholder:"Select a role..."})}),(0,s.jsxs)(f.gC,{children:[(0,s.jsx)(f.eb,{value:"none",children:"No Role"}),r.map(e=>(0,s.jsx)(f.eb,{value:e.id,children:e.name},e.id))]})]})}),0!==a.length||d?(0,s.jsx)(m.F,{className:"flex-1",ref:x,children:(0,s.jsxs)("div",{className:"mx-auto w-full max-w-2xl space-y-6 p-4 md:p-6",children:[a.map((e,t)=>(0,s.jsx)(p.A,{message:e},t)),d&&(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[(0,s.jsx)("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full bg-primary text-primary-foreground",children:(0,s.jsx)(i.A,{className:"h-5 w-5"})}),(0,s.jsxs)("div",{className:"flex-1 rounded-lg border p-4 text-sm bg-card flex items-center gap-2 light:bg-white",children:[(0,s.jsx)(l.A,{className:"h-4 w-4 animate-spin"}),(0,s.jsx)("span",{children:"Thinking..."})]})]})]})}):(0,s.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center p-4 rounded-lg",children:[(0,s.jsx)(i.A,{className:"mx-auto h-12 w-12 text-muted-foreground"}),(0,s.jsx)("h2",{className:"mt-4 text-xl font-semibold",children:"Assistant"}),(0,s.jsx)("p",{className:"mt-1 text-muted-foreground",children:"Start a conversation to begin."})]})}),(0,s.jsx)("div",{className:"border-t bg-background p-4 md:p-6 light:bg-white",children:(0,s.jsxs)("form",{onSubmit:h,className:"flex items-center gap-2 max-w-4xl mx-auto",children:[(0,s.jsx)(u.p,{value:g,onChange:e=>v(e.target.value),placeholder:"Type a message...",disabled:d||!j}),(0,s.jsxs)(c.$,{type:"submit",size:"icon",disabled:d||!g.trim()||!j,children:[(0,s.jsx)(o.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Send"})]})]})})]})};function P(){var e,t;let[n,i]=(0,r.useState)(!1);(0,r.useEffect)(()=>{i(!0)},[]);let[l,o]=(0,r.useState)([]),[c,u]=(0,r.useState)(""),[m,p]=(0,r.useState)(!1),[f,j]=(0,r.useState)(null),S=(0,r.useRef)(""),b=(0,r.useRef)(null),[$,N]=(0,r.useTransition)(),{toast:y}=(0,g.dj)(),[T]=(0,a.IT)({query:x.g3,variables:{term:""},pause:!n}),C=(null==(e=T.data)?void 0:e.list)||[],[w]=(0,a.IT)({query:x.sz,pause:!n}),A=(null==(t=w.data)?void 0:t.rolePrompts)||[],[I,k]=(0,a.n_)(h.of),E=(0,r.useMemo)(()=>C.length>0?C[0].id:null,[C]);(0,r.useEffect)(()=>{N(()=>{S.current="conv-".concat(Date.now()),o([])})},[E,f]),(0,r.useEffect)(()=>{if(b.current){let e=b.current.querySelector("div[data-radix-scroll-area-viewport]");e&&(e.scrollTop=e.scrollHeight)}},[l]);let R=(0,r.useCallback)(e=>{if(!E)return void y({variant:"destructive",title:"No prompt available",description:"Please create a prompt to start the conversation."});let t=[];f&&t.push({key:"role",value:f}),p(!0),k({input:{useCasesId:E,request:{messages:e.map(e=>{let{role:t,content:n,format:s}=e;return{role:t,content:n,format:s}}),userContext:{profile:[]},systemContext:t,conversationContext:{conversationId:S.current}}}}).then(e=>{let{data:t,error:n}=e;if(p(!1),n)y({variant:"destructive",title:"Error getting assistant response",description:n.message}),o(e=>[...e,{role:"assistant",content:"Sorry, I encountered an error.",format:"text"}]);else if(null==t?void 0:t.assistant){var s,r;let e=(t.assistant.messages||[]).map(e=>{let{__typename:t,...n}=e;return n}),n=null==(s=t.assistant.context)?void 0:s.map(e=>{let{__typename:t,...n}=e;return n}),a=null==(r=t.assistant.toolCalls)?void 0:r.map(e=>{let{__typename:t,...n}=e;return n});if(e.length>0){let t=e[e.length-1];"assistant"===t.role&&(n&&n.length>0&&(t.context=n),a&&a.length>0&&(t.toolCalls=a)),o(t=>[...t,...e])}else if(a&&a.length>0){let e={role:"assistant",content:"",format:"text",toolCalls:a};n&&n.length>0&&(e.context=n),o(t=>[...t,e])}}})},[k,E,y,f]);return(0,s.jsxs)("div",{className:"flex h-screen w-full flex-col bg-background light:bg-gray-100",children:[(0,s.jsx)(d.default,{}),(0,s.jsx)("main",{className:"flex flex-1 overflow-hidden",children:(0,s.jsxs)(v.HK,{direction:"horizontal",children:[(0,s.jsx)(v.wV,{defaultSize:75,children:(0,s.jsx)(M,{selectedRole:f,onRoleChange:j,roles:A,messages:l,isThinking:m,scrollAreaRef:b,onFormSubmit:e=>{if(e.preventDefault(),!c.trim()||m)return;let t=[...l,{role:"user",content:c,format:"text"}];o(t),R(t),u("")},input:c,onInputChange:u,selectedPrompt:E})}),(0,s.jsx)(v.WM,{withHandle:!0}),(0,s.jsx)(v.wV,{defaultSize:25,children:(0,s.jsx)("div",{className:"h-full p-4",children:(0,s.jsx)(D,{})})})]})})]})}},65142:(e,t,n)=>{"use strict";n.d(t,{p:()=>i});var s=n(95155),r=n(12115),a=n(64269);let i=r.forwardRef((e,t)=>{let{className:n,type:r,...i}=e;return(0,s.jsx)("input",{type:r,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:t,...i})});i.displayName="Input"},68086:(e,t,n)=>{"use strict";n.d(t,{EF:()=>h,G1:()=>f,I6:()=>c,K1:()=>$,Lp:()=>d,Q6:()=>i,Tc:()=>m,dk:()=>j,fe:()=>o,j_:()=>b,jq:()=>x,n$:()=>a,of:()=>s,rr:()=>g,t5:()=>p,v3:()=>u,vH:()=>S,w8:()=>l,x3:()=>v,xu:()=>r});let s="\n  mutation Assistant($input: AssistantInput!) {\n    assistant(input: $input) {\n      messages {\n        role\n        content\n        format\n      }\n      responseTime\n      context {\n        key\n        value\n      }\n      toolCalls {\n        name\n        arguments\n      }\n    }\n  }\n",r="\n  mutation examples($useCase: String!) {\n    examples(useCase: $useCase) {\n      useCase\n      examples\n    }\n  }\n",a="\n  mutation newTests($id: String!) {\n    newTests(id: $id) {\n      count\n    }\n  }\n",i="\n  mutation storeADL($id: String!, $createdAt: String!, $tags: [String!]!, $content: String!, $examples: [String!]!) {\n    store(id: $id, createdAt: $createdAt, tags: $tags, content: $content, examples: $examples) {\n      message\n      storedExamplesCount\n    }\n  }\n",l="\n  mutation updateTags($id: String!, $tags: [String!]!) {\n    updateTags(id: $id, tags: $tags) {\n      message\n    }\n  }\n",o="\n  mutation delete($id: String!) {\n    delete(id: $id) {\n      message\n    }\n  }\n",d="\n  mutation ImproveUseCase($useCase: String!) {\n    improveUseCase(useCase: $useCase) {\n      improvements {\n        improved_use_case\n        issue\n        suggestion\n      }\n    }\n  }\n",c="\n  mutation executeTests($id: String!, $testCaseId: String) {\n    executeTests(adlId: $id, testCaseId: $testCaseId) {\n      overallScore\n      results {\n        score\n        status\n        actualConversation {\n          content\n          role\n        }\n        details {\n          evidence {\n            mapsTo\n            quote\n          }\n          missingRequirements\n          reasons\n          score\n          verdict\n          violations\n        }\n        testCaseId\n        testCaseName\n        useCases\n      }\n    }\n  }\n",u="\n  mutation deleteTest($id: String!) {\n    deleteTest(id: $id) \n  }\n",m="\n  mutation updateTest($input: UpdateTestCaseInput!) {\n    updateTest(input: $input) {\n      id\n    }\n  }\n",p="\n  mutation addTest($input: AddTestCaseInput!) {\n    addTest(input: $input) {\n      id\n    }\n  }\n",x="\n  mutation setMcpServerUrls($urls: [String!]!) {\n    setMcpServerUrls(urls: $urls) {\n    url\n    reachable\n    toolCount \n    }\n  }\n",h="\n  mutation correctSpelling($text: String!) {\n    correctSpelling(text: $text)\n  }\n",g="\n  mutation GenerateWidget($name: String!, $purpose: String!, $interactions: String!) {\n    generateWidget(input: {\n      name: $name,\n      purpose: $purpose,\n      interactions: $interactions\n    }) {\n      html\n      jsonSchema\n    }\n  }\n",f="\n  mutation SetUserSettings($apiKey: String!, $modelName: String!, $modelUrl: String) {\n    setUserSettings(apiKey: $apiKey, modelName: $modelName, modelUrl: $modelUrl) {\n      apiKey\n      modelName\n      modelUrl\n    }\n  }\n",v="\n  mutation SaveWidget($id: String, $name: String!, $html: String!, $jsonSchema: String!, $preview: String!) {\n    saveWidget(input: {\n      id: $id,\n      name: $name,\n      html: $html,\n      jsonSchema: $jsonSchema,\n      preview: $preview\n    }) {\n      id\n      name\n    }\n  }\n",j="\n  mutation DeleteWidget($id: String!) {\n    deleteWidget(id: $id)\n  }\n",S="\n  mutation UpdateRolePrompt($id: String!, $name: String!, $role: String!, $tone: String!) {\n    updateRolePrompt(id: $id, name: $name, role: $role, tone: $tone) {\n      id\n      name\n      role\n      tone\n    }\n  }\n",b="\n  mutation DeleteRolePrompt($id: String!) {\n    deleteRolePrompt(id: $id)\n  }\n",$="\n  mutation UpdateOutput($id: String!, $output: String!) {\n    updateOutput(id: $id, output: $output) {\n      message\n    }\n  }\n"},86948:(e,t,n)=>{"use strict";n.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>i,aR:()=>l});var s=n(95155),r=n(12115),a=n(64269);let i=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-lg dark:shadow-sm",n),...r})});i.displayName="Card";let l=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",n),...r})});l.displayName="CardHeader";let o=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",n),...r})});o.displayName="CardTitle";let d=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",n),...r})});d.displayName="CardDescription";let c=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",n),...r})});c.displayName="CardContent",r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",n),...r})}).displayName="CardFooter"}},e=>{e.O(0,[992,644,73,381,44,886,34,497,990,405,966,441,255,358],()=>e(e.s=50085)),_N_E=e.O()}]);